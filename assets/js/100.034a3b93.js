(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{657:function(t,s,a){"use strict";a.r(s);var l=a(35),c=Object(l.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[t._v("#")]),t._v(" Docker")]),t._v(" "),a("p",[a("code",[t._v("docker run")]),t._v(" 相当于 "),a("code",[t._v("docker create")]),t._v(" 加 "),a("code",[t._v("docker start")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## docker run [OPTIONS] IMAGE [COMMAND] [ARGS...]")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## e.g.")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("docker")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("run")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("--name")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("your_container_name")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("\\")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("           ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("-it")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("\\ ")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("           ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## --interactive (open STDIN) and --tty (allocate a pseudo-TTY)")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("           ")]),a("span",{staticStyle:{color:"#6F42C1"}},[t._v("-p")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("80")]),a("span",{staticStyle:{color:"#032F62"}},[t._v(":")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("80")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("\\ ")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("      ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## --publish (map host's port 80 to container's port 80)")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("           ")]),a("span",{staticStyle:{color:"#6F42C1"}},[t._v("-p")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("2233")]),a("span",{staticStyle:{color:"#032F62"}},[t._v(":")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("22")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("\\ ")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## also exposes the container's SSH port 22")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("           ")]),a("span",{staticStyle:{color:"#6F42C1"}},[t._v("--gpus")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("all")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("\\ ")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## access to GPUs")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("           ")]),a("span",{staticStyle:{color:"#6F42C1"}},[t._v("--mount")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("src=~/shared,target=/shared,type=bind")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("\\ ")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## shared folder")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("           ")]),a("span",{staticStyle:{color:"#6F42C1"}},[t._v("ubuntu")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("           ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## image name")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("           ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("# /bin/bash      ## entrypoint of the container [^1]")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## press CTRL-p, CTRL-q to detach from the container and leave it running")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("docker")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("ps")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("-a")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("  ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## show all containers (by default show only running containers)")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("docker")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("stop")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("container_name")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("docker")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("start")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("container_name")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("docker")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("attach")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("container_name")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("  ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## attach your terminal's STDIN etc. to the running container")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## This can appear as if the attach command is hung. Just press any key to continue.")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## create a new image from a container")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("docker")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("commit")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("container_id")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("\\ ")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## as shown by "docker ps"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("              ")]),a("span",{staticStyle:{color:"#6F42C1"}},[t._v("yzhang/testimage:version1")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("  ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## [REPOSITORY[:TAG]]")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("docker")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("images")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("                            ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## list images")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("docker")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("rm")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("container_name")])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("p",[a("a",{attrs:{href:"https://docs.docker.com/engine/reference/run/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker CLI reference"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("配置 SSH 用于远程连接，以基于 Ubuntu 16.04 的镜像为例")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## By default you are root user in the container")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("passwd")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("  ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## set password")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("apt")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("update")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("apt")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("install")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("vim")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("ssh")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("vim")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("/etc/ssh/sshd_config")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## set PermitRootLogin to yes")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("service")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("ssh")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("start")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("service")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("ssh")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("status")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## start ssh service upon the container start")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("# systemctl enable ssh  ## this will not work [^1]")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("vim")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("~/.bashrc")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v('## add "servive ssh start &> /dev/null"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## as the default entrypoint of the container is /bin/bash")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## [1]: https://medium.com/swlh/docker-and-systemd-381dfd7e4628")])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## ssh to the container from another device")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6F42C1"}},[t._v("ssh")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("-p")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("2233")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v("root@host")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("  ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## depending on your port mapping, e.g. `docker run -p 2233:22`")])]),t._v("\n"),a("span",{staticClass:"line"})])])])])}),[],!1,null,null,null);s.default=c.exports}}]);