(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{659:function(t,a,s){"use strict";s.r(a);var l=s(35),c=Object(l.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"ffmpeg"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ffmpeg"}},[t._v("#")]),t._v(" FFmpeg")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("如果是在 conda 环境中最好提前手动安装")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("conda")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("install")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("x264")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("p",[t._v("否则安装其它包如 PyTorch 时会自动安装不支持 libx264 的版本")])]),t._v(" "),s("h2",{attrs:{id:"拼接多个视频"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拼接多个视频"}},[t._v("#")]),t._v(" 拼接多个视频")]),t._v(" "),s("p",[t._v("首先创建一个 "),s("code",[t._v("mylist.txt")]),t._v(" 文件，格式如下")]),t._v(" "),s("div",{staticClass:"language-plaintextc extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("# this is a comment")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("file '/path/to/file1.mp4'")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("file '/path/to/file2.mp4'")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("file '/path/to/file3.mp4'")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("p",[t._v("在 Windows Command-Line 中可以使用如下命令快速为当前文件夹生成上述文件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("(for %i in (*.mp4) do @echo file '%i') > mylist.txt\n")])])]),s("p",[t._v("进行拼接")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-f")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("concat")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-safe")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("0")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("mylist.txt")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-c")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("copy")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("output.mp4")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("p",[t._v("默认的 "),s("code",[t._v("-safe 1")]),t._v(" 参数对输入文件路径的限制比较多")]),t._v(" "),s("blockquote",[s("p",[t._v("The paths listed within your text file are interpreted by ffmpeg as being relative to the location of your text file. (In particular, the paths listed are not relative to the current working directory.) "),s("a",{attrs:{href:"https://superuser.com/a/943258/950027",target:"_blank",rel:"noopener noreferrer"}},[t._v("source"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://trac.ffmpeg.org/wiki/Concatenate",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://trac.ffmpeg.org/wiki/Concatenate"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"格式转换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#格式转换"}},[t._v("#")]),t._v(" 格式转换")]),t._v(" "),s("h3",{attrs:{id:"mp4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mp4"}},[t._v("#")]),t._v(" MP4")]),t._v(" "),s("p",[t._v("转换 "),s("code",[t._v("mkv")]),t._v("，"),s("code",[t._v("avi")]),t._v(" 为 "),s("code",[t._v("mp4")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("input.mkv")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-c")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("copy")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("output.mp4")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("p",[t._v("转换 "),s("code",[t._v("wmv")]),t._v(" 为 "),s("code",[t._v("mp4")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("input.wmv")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-c:v")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("libx264")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-crf")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("17")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("output.mp4")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("p",[s("a",{attrs:{href:"https://trac.ffmpeg.org/wiki/Encode/H.264",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://trac.ffmpeg.org/wiki/Encode/H.264"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"动图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#动图"}},[t._v("#")]),t._v(" 动图")]),t._v(" "),s("h4",{attrs:{id:"gif"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gif"}},[t._v("#")]),t._v(" GIF")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-ss")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("1")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-to")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("4")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("input.mp4")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("\\")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-vf")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"fps=10,scale=320:-1:flags=lanczos,split[a][b];[a]palettegen[p];[b][p]paletteuse"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("\\")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("output.gif")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("p",[s("a",{attrs:{href:"https://superuser.com/a/556031",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://superuser.com/a/556031"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"webp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webp"}},[t._v("#")]),t._v(" WebP")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-ss")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("1")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-to")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("4")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("input.mp4")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-vcodec")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("libwebp")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-vf")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"fps=fps=15,scale=640:360"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("\\")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-lossless")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("1")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-loop")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("0")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-preset")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("default")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-an")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-vsync")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("0")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("output.webp")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("p",[s("a",{attrs:{href:"https://gist.github.com/witmin/1edf926c2886d5c8d9b264d70baf7379",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gist.github.com/witmin/1edf926c2886d5c8d9b264d70baf7379"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("需要裁剪的时候在 "),s("code",[t._v("-vf")]),t._v(" 中加入 "),s("code",[t._v("crop=w:h:x:y")]),t._v(" 即可")]),t._v(" "),s("h2",{attrs:{id:"图像和视频相互转换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#图像和视频相互转换"}},[t._v("#")]),t._v(" 图像和视频相互转换")]),t._v(" "),s("h3",{attrs:{id:"将图像序列合并为视频"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将图像序列合并为视频"}},[t._v("#")]),t._v(" 将图像序列合并为视频")]),t._v(" "),s("div",{staticClass:"language-shelldoc extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" [-framerate 24] ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("images/%")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("4d.jpg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" [-frames:v ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("<")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("num_frames")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(">")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("] [-s 1920x1080] [-crf 18] ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("\\")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("output.mp4")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("p",[t._v("也可以使用 glob 选择图片 "),s("code",[t._v("-pattern_type glob -i 'images/*.jpg'")]),t._v("（因为 glob pattern 包含星号等特殊符号所以注意使用引号）")]),t._v(" "),s("h3",{attrs:{id:"将视频拆成图片"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将视频拆成图片"}},[t._v("#")]),t._v(" 将视频拆成图片")]),t._v(" "),s("div",{staticClass:"language-shelldoc extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("input.mov")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" [-qscale:v 2] [-vf fps")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("1] [-start_number 100] ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("images/%")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("6d.jpg")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("ul",[s("li",[s("code",[t._v("-qscale:v")]),t._v("（或者缩写 "),s("code",[t._v("-q:v")]),t._v("）来控制 JPEG 的质量，范围 2–31（"),s("a",{attrs:{href:"https://stackoverflow.com/a/10234065/8682688",target:"_blank",rel:"noopener noreferrer"}},[t._v("链接"),s("OutboundLink")],1),t._v("）")]),t._v(" "),s("li",[s("code",[t._v("fps=1")]),t._v(" 即每秒取一张图，如果是 "),s("code",[t._v("fps=1/2")]),t._v(" 则相当于每两秒取一张图")])]),t._v(" "),s("h2",{attrs:{id:"多个视频-side-by-side"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#多个视频-side-by-side"}},[t._v("#")]),t._v(" 多个视频 side-by-side")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("left.mp4")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("right.mp4")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-filter_complex")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("hstack")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("output.mp4")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("p",[t._v("如果是三个视频则可以使用 "),s("code",[t._v("hstack=inputs=3")])]),t._v(" "),s("p",[t._v("除了 "),s("code",[t._v("hstack")]),t._v(" 和 "),s("code",[t._v("vstack")]),t._v("，还可以使用 "),s("code",[t._v("xstack")]),t._v("，其支持参数比如 "),s("code",[t._v("grid=3x2")]),t._v("（3 列 2 行），比较旧的版本可能还不支持（可以从 "),s("a",{attrs:{href:"https://github.com/BtbN/FFmpeg-Builds",target:"_blank",rel:"noopener noreferrer"}},[t._v("FFmpeg-Builds"),s("OutboundLink")],1),t._v(" 下载 Linux 下编译好的单文件二进制）")]),t._v(" "),s("h2",{attrs:{id:"裁剪缩放填衬视频"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#裁剪缩放填衬视频"}},[t._v("#")]),t._v(" 裁剪、缩放、填衬视频")]),t._v(" "),s("ul",[s("li",[s("strong",[s("code",[t._v("crop=<w>:<h>:<x>:<y>")])])]),t._v(" "),s("li",[s("strong",[s("code",[t._v("scale=<w>:<h>")])])]),t._v(" "),s("li",[s("strong",[s("code",[t._v("pad=<w>:<h>:<x>:<y>[:<color>]")])])])]),t._v(" "),s("p",[s("code",[t._v("w")]),t._v(" 和 "),s("code",[t._v("h")]),t._v(" 可以只指定一个值，另一个用 "),s("code",[t._v("-1")]),t._v(" 由原本的长宽比来确定，"),s("code",[t._v("-2")]),t._v(" 则额外要求其是偶数")]),t._v(" "),s("p",[t._v("使用逗号 "),s("code",[t._v(",")]),t._v(" 连接，依次应用多个 filter ("),s("a",{attrs:{href:"https://trac.ffmpeg.org/wiki/FilteringGuide",target:"_blank",rel:"noopener noreferrer"}},[t._v("FilteringGuide"),s("OutboundLink")],1),t._v(")")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("## 将视频缩放为 200x200，然后竖直方向居中填充至 200x400 大小")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("input")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-vf")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("'scale=200:200,pad=200:400:0:(oh-ih)/2'")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("output")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("p",[t._v("可以使用 "),s("code",[t._v("iw")]),t._v("，"),s("code",[t._v("ow")]),t._v("，"),s("code",[t._v("ih")]),t._v("，"),s("code",[t._v("oh")]),t._v(" 等变量，以及 "),s("code",[t._v("/")]),t._v("，"),s("code",[t._v("*")]),t._v(" 等来计算相应参数")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://ffmpeg.org/ffmpeg-filters.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://ffmpeg.org/ffmpeg-filters.html"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"叠加视频"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#叠加视频"}},[t._v("#")]),t._v(" 叠加视频")]),t._v(" "),s("p",[t._v("将 "),s("code",[t._v("fg.mp4")]),t._v(" 缩小、变透明，然后叠加在 "),s("code",[t._v("bg.mp4")]),t._v(" 左下角")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("bg.mp4")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("fg.mp4")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-filter_complex")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("\\")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#032F62"}},[t._v("'[0:v]null[bg]; \\")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#032F62"}},[t._v("[1:v]scale=-1:480,format=rgba,colorchannelmixer=aa=0.8[fg]; \\")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#032F62"}},[t._v("[bg][fg]overlay=0:(main_h-overlay_h)'")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("\\")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("-crf ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("15")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("out.mp4")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("p",[t._v("（如果运行有问题可以将 filter 参数写成一行再运行）")]),t._v(" "),s("h2",{attrs:{id:"仅保留视频或音频"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#仅保留视频或音频"}},[t._v("#")]),t._v(" 仅保留视频或音频")]),t._v(" "),s("p",[s("code",[t._v("-an")]),t._v(" 去除音频")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("ffmpeg -i input.mp4 -c copy -an output.mp4\n")])])]),s("p",[s("code",[t._v("-vn")]),t._v(" 去除视频")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("ffmpeg -i input.mp4 -c copy -vn output.aac\n")])])]),s("h2",{attrs:{id:"添加文字"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加文字"}},[t._v("#")]),t._v(" 添加文字")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://ffmpeg.org/ffmpeg-filters.html#drawtext-1",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("drawtext")]),s("OutboundLink")],1),t._v(" filter")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("style_str")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"fontfile=noto-sans.ttf:fontsize=36:fontcolor=white:shadowx=2:shadowy=2:shadowcolor=black"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("input.mp4")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-vf")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("\"drawtext=text='hello world':x=60:y=60:")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("$style_str")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-crf")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("16")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("output.mp4")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("ul",[s("li",[s("code",[t._v("text")]),t._v(" 参数里还可以使用变量，比如 "),s("code",[t._v("text=%{n}")]),t._v(" 表示帧号，起始为 0（由另一个参数 "),s("code",[t._v("start_number")]),t._v(" 控制）")]),t._v(" "),s("li",[s("code",[t._v("box")]),t._v(" 参数可以给文字加背景框，"),s("code",[t._v("box=1:boxcolor=white@0.5:boxborderw=5")])])]),t._v(" "),s("h2",{attrs:{id:"gpu"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gpu"}},[t._v("#")]),t._v(" GPU")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.nvidia.com/video-technologies/video-codec-sdk/12.0/ffmpeg-with-nvidia-gpu/index.html#quality-testing",target:"_blank",rel:"noopener noreferrer"}},[t._v("Using FFmpeg with NVIDIA GPU Hardware Acceleration – NVIDIA Docs"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-vsync")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("0")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-hwaccel")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("cuvid")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-c:v")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("h264_cuvid")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("input.mp4")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-c:a")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("copy")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-c:v")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("h264_nvenc")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("\\")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-b:v")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("0")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-cq")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("27")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("output.mp4")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("blockquote",[s("p",[t._v("where")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("-b:v 0  overrides the default 2mbps bitrate as noted by Gyan\n-cq 1   target quality level (range of 0-51)\n        0 means automatic (in my case around 15mbps)\n        1 gives about 15mbps, 26 results in around 5mbps, 51 results in 0.5mbps\n")])])]),s("p",[s("a",{attrs:{href:"https://video.stackexchange.com/a/30625",target:"_blank",rel:"noopener noreferrer"}},[t._v("Configure CQP (CRF) for h264_nvenc – StackExchange"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("HEVC 编码就用 "),s("code",[t._v("hevc_nvenc")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://trac.ffmpeg.org/wiki/HWAccelIntro#CUDANVENCNVDEC",target:"_blank",rel:"noopener noreferrer"}},[t._v("HWAccelIntro > CUDA (NVENC/NVDEC) – FFmpeg"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("查看 encoder 帮助")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-h")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("encoder=h264_nvenc")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("p",[t._v("其中有 supported pixel formats 信息以及 encoder 设置项")]),t._v(" "),s("h3",{attrs:{id:"编码质量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编码质量"}},[t._v("#")]),t._v(" 编码质量")]),t._v(" "),s("p",[t._v("GPU 最高质量使用 "),s("code",[t._v("-preset p7")]),t._v(" 和 "),s("code",[t._v("-pix_fmt p010le")]),t._v(" (10 bit depth)，"),s("code",[t._v("-rc-lookahead 20")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.reddit.com/r/ffmpeg/comments/ystse6/hevc_nvenc_2pass_question/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.reddit.com/r/ffmpeg/comments/ystse6/hevc_nvenc_2pass_question/"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.zhihu.com/question/22501094",target:"_blank",rel:"noopener noreferrer"}},[t._v("GPU 转码效果为什么不如纯 CPU？– 知乎"),s("OutboundLink")],1)]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("此外，不论是否使用 GPU 编码，"),s("strong",[t._v("关键帧间隔")]),t._v("可以使用 "),s("code",[t._v("-g")]),t._v(" 参数 (Group of Picture size) 设置，可以理解为两个关键帧之间的帧数。如果希望每 3 秒一个关键帧则可以设置为 3 倍 fps 大小")]),t._v(" "),s("h2",{attrs:{id:"查看帮助"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看帮助"}},[t._v("#")]),t._v(" 查看帮助")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-h")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("filter=xstack")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-h")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("encoder=h264_nvenc")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("h2",{attrs:{id:"extra"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extra"}},[t._v("#")]),t._v(" Extra")]),t._v(" "),s("h3",{attrs:{id:"视频下载工具-lux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#视频下载工具-lux"}},[t._v("#")]),t._v(" 视频下载工具 "),s("a",{attrs:{href:"https://github.com/iawia002/lux",target:"_blank",rel:"noopener noreferrer"}},[t._v("lux"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("e.g. Bilibili")]),t._v(" "),s("div",{staticClass:"language-shelldoc extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("## -c 提供 cookie")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("## -i 查询提供的格式")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("## -f 下载指定的格式")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("lux")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-c")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"SESSDATA=<cookie_value>"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"https://www.bilibili.com/video/BVxxxxxxxxxx/"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("lux")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-c")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"SESSDATA=<cookie_value>"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-f")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("80-7")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"https://www.bilibili.com/video/BVxxxxxxxxxx/"')])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("details",{staticClass:"custom-block details"},[s("summary",[s("code",[t._v("youtube-dl")])]),t._v(" "),s("p",[t._v("list available formats")]),t._v(" "),s("div",{staticClass:"language-shelldoc extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("youtube-dl")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-F")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" <")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("ur")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("l>")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("p",[t._v("download the selected format")]),t._v(" "),s("div",{staticClass:"language-shelldoc extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("youtube-dl")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-f")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" <")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("format_cod")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("e> <")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("ur")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("l>")])]),t._v("\n"),s("span",{staticClass:"line"})])])]),s("p",[t._v("others")]),t._v(" "),s("div",{staticClass:"language-shelldoc extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("youtube-dl")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" [--proxy ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("<")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("proxy")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(">")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("] ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-f")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("'bestvideo[ext=mp4]+bestaudio[ext=m4a]/bestvideo+bestaudio'")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("--merge-output-format")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("mp4")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" <")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("ur")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("l>")])]),t._v("\n"),s("span",{staticClass:"line"})])])])]),t._v(" "),s("h3",{attrs:{id:"fix-for-too-short-error-on-avidemux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fix-for-too-short-error-on-avidemux"}},[t._v("#")]),t._v(' Fix for "Too short!" error on avidemux')]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("# This will recreate timestamps on the stream allowing avidemux to export the file.")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("# Note that the output has to be a Matroska container (.mkv).")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("# <https://gist.github.com/dmcallejo/3aef05029222eb38604a61b1623784c8>")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6F42C1"}},[t._v("ffmpeg")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-start_at_zero")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-copyts")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-i")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("input_file.ts")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-map")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("0")]),s("span",{staticStyle:{color:"#032F62"}},[t._v(":v")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-c")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("copy")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("-map")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("0")]),s("span",{staticStyle:{color:"#032F62"}},[t._v(":a:")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("0")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("output_file.mkv")])]),t._v("\n"),s("span",{staticClass:"line"})])])])])}),[],!1,null,null,null);a.default=c.exports}}]);