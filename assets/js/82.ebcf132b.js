(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{638:function(t,s,a){"use strict";a.r(s);var l=a(35),o=Object(l.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"python"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#python"}},[t._v("#")]),t._v(" Python")]),t._v(" "),a("h2",{attrs:{id:"作用域-scope"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#作用域-scope"}},[t._v("#")]),t._v(" 作用域 (scope)")]),t._v(" "),a("ul",[a("li",[t._v("Python 程序由"),a("mark",[t._v("代码块")]),t._v("组成，包括"),a("strong",[t._v("模块")]),t._v(" (module)，"),a("strong",[t._v("类")]),t._v(" (class)，"),a("strong",[t._v("函数")]),t._v(" (def) 等"),a("br"),t._v("\n注意 "),a("strong",[t._v("if")]),t._v("，"),a("strong",[t._v("for")]),t._v(" 等语句不构成代码块")]),t._v(" "),a("li",[t._v("当变量在"),a("strong",[t._v("代码块")]),t._v("中被定义时，作用域为该代码块")])]),t._v(" "),a("h3",{attrs:{id:"变量名解析-legb-法则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量名解析-legb-法则"}},[t._v("#")]),t._v(" 变量名解析 LEGB 法则")]),t._v(" "),a("p",[t._v("变量名解析顺序：最近的 scope")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#005CC5"}},[t._v("__name__")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("__file__")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## Builtin")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("global_var ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("1")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## Global (i.e. module-scoped)")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("def")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#6F42C1"}},[t._v("outer")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("():")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("    enclosing_var ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("2")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("     ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## Enclosing (relative to `inner`)")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("def")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#6F42C1"}},[t._v("inner")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("():")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("        local_var ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("3")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("     ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## Local")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("(")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"Local     ')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("local_var")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":^8")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(")")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("(")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"Enclosing ')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("enclosing_var")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":^8")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(")")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("(")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"Global    ')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("global_var")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":^8")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(")")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("(")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"Builtin   ')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{__name__")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":^8")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(")")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("    inner()")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("if")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("__name__")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("==")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"__main__"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(":")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("    outer()")])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("p",[t._v("Output")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("Local        3\nEnclosing    2\nGlobal       1\nBuiltin   __main__\n")])])]),a("h3",{attrs:{id:"unboundlocalerror"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unboundlocalerror"}},[t._v("#")]),t._v(" UnboundLocalError")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("global_var ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("1")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("def")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#6F42C1"}},[t._v("f1")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("():")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("(global_var)     ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## 1")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("def")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#6F42C1"}},[t._v("f2")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("():")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("    global_var ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("2")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## We now have a local variable 'global_var' within f2")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("(global_var)     ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## 2")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("def")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#6F42C1"}},[t._v("f3")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("():")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("(global_var)     ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## UnboundLocalError: local variable 'global_var'↵")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("    global_var ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("2")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("## referenced before assignment")])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("p",[t._v("因为 Python 中局部变量可以和全局变量同名，所以上述错误时常出现。"),a("br"),t._v("\n如果代码块中任何位置出现了"),a("strong",[t._v("变量名绑定语句")]),t._v("（比如 "),a("code",[t._v("a = 2")]),t._v("），则该代码块中所有变量名 a 都指向该局部变量，"),a("strong",[t._v("包括出现在变量名绑定之前的语句")]),t._v("。")]),t._v(" "),a("p",[t._v("好消息是这种错误可以被静态检查工具发现（比如 Pyright）")]),t._v(" "),a("p",[t._v("注意 "),a("code",[t._v("global_dict['foo'] = 'bar'")]),t._v(" 不是变量名绑定语句，不会导致这种错误（"),a("code",[t._v("global_dict = {'foo': 'bar'}")]),t._v(" 才是）")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.python.org/3/reference/executionmodel.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python 执行模型"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"python-中的路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#python-中的路径"}},[t._v("#")]),t._v(" Python 中的路径")]),t._v(" "),a("h3",{attrs:{id:"工作目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工作目录"}},[t._v("#")]),t._v(" 工作目录")]),t._v(" "),a("p",[t._v("每一个进程都有对应的工作目录 (working directory)，"),a("strong",[t._v("当进程以相对路径访问文件时则是相对于此目录")]),t._v("。"),a("br"),t._v("\n对于 Python 来说工作目录即执行 "),a("code",[t._v("python")]),t._v(" 命令时的目录，可以使用 "),a("code",[t._v("os.getcwd()")]),t._v(" 获取。")]),t._v(" "),a("p",[t._v("测试目录")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("~/path-test/\n├── subfolder/\n│   └── submodule.py\n└── main.py\n")])])]),a("div",{staticClass:"language-python extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## both main.py and submodule.py")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("import")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" os")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("(")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"working dir"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(", os.getcwd())")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("(")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"file path  "')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("__file__")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(")")])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("div",{staticClass:"language-shellsession extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#005CC5","font-weight":"bold"}},[t._v("~/path-test$")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" python main.py")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("working dir: /home/yu/path-test")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("file path:   main.py")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#005CC5","font-weight":"bold"}},[t._v("~/path-test$")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" python subfolder/submodule.py")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("working dir: /home/yu/path-test")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("file path:   subfolder/submodule.py")])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("div",{staticClass:"language-shellsession extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#005CC5","font-weight":"bold"}},[t._v("~/path-test$")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" cd subfolder")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#005CC5","font-weight":"bold"}},[t._v("~/path-test/subfolder$")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" python submodule.py")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("working dir: /home/yu/path-test/subfolder")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("file path:   submodule.py")])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("p",[a("strong",[t._v("子进程的工作目录继承自其父进程")])]),t._v(" "),a("p",[t._v("修改 "),a("code",[t._v("submodule.py")]),t._v(" 为")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("import")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" subprocess")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("(subprocess.check_output(")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"tree"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),a("span",{staticStyle:{color:"#E36209"}},[t._v("shell")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("True")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),a("span",{staticStyle:{color:"#E36209"}},[t._v("encoding")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"utf-8"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("))")])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("div",{staticClass:"language-shellsession extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#005CC5","font-weight":"bold"}},[t._v("~/path-test$")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" python subfolder/submodule.py")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v(".")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("├── main.py")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("└── subfolder")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("    └── submodule.py")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#005CC5","font-weight":"bold"}},[t._v("~/path-test/subfolder$")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" python submodule.py")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v(".")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("└── submodule.py")])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("h3",{attrs:{id:"模块查找目录-syspath"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块查找目录-syspath"}},[t._v("#")]),t._v(" 模块查找目录 "),a("code",[t._v("sys.path")])]),t._v(" "),a("p",[a("code",[t._v("sys.path")]),t._v(" 是 Python 尝试导入模块时会去查找的路径列表，默认初始化为 Python 的安装路径下的若干位置，以及 "),a("code",[t._v("PYTHONPATH")]),t._v(" 环境变量。在程序中也可以访问修改")]),t._v(" "),a("p",[t._v("在运行 Python 时，还会在 "),a("code",[t._v("sys.path")]),t._v(" 中额外添加特定路径，对于不同情况：")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("python /path/to/script.py")]),t._v("：添加 "),a("code",[t._v("script.py")]),t._v(" 所在的目录，即 "),a("code",[t._v("/path/to/")]),t._v("，"),a("strong",[t._v("而不是当前工作目录")])]),t._v(" "),a("li",[a("code",[t._v("python -m module")]),t._v("：添加当前工作目录，即 "),a("code",[t._v(".")])]),t._v(" "),a("li",[a("code",[t._v("python")]),t._v(" (REPL) 和 "),a("code",[t._v("python -c code")]),t._v("：添加空字符串，也即当前工作目录")])]),t._v(" "),a("p",[t._v("在情况 1 下如果运行的是某个子目录下的 Python 脚本就很容易出现 "),a("code",[t._v("ModuleNotFoundError")]),t._v("，因为当前工作目录并不在 "),a("code",[t._v("sys.path")]),t._v(" 里")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.python.org/3/library/sys.html#sys.path",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.python.org/3/library/sys.html#sys.path"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("TODO")]),t._v(" "),a("p",[t._v("absolute and relative imports")]),t._v(" "),a("p",[t._v("https://stackoverflow.com/a/43859946/8682688"),a("br"),t._v("\nhttps://docs.python.org/3/tutorial/modules.html#the-module-search-path"),a("br"),t._v("\nhttps://www.pythonforthelab.com/blog/complete-guide-to-imports-in-python-absolute-relative-and-more/")]),t._v(" "),a("h2",{attrs:{id:"手动断行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#手动断行"}},[t._v("#")]),t._v(" 手动断行")]),t._v(" "),a("p",[t._v("句末的反斜杠 "),a("code",[t._v("\\")]),t._v(" 会把多个物理行拼接为一个逻辑行（在 "),a("code",[t._v('"""')]),t._v("/"),a("code",[t._v("'''")]),t._v(" 多行字符串和注释中除外）")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("is_valid_date ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("1900")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("<")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" year ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("<")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("2100")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("and")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("1")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("<=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" month ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("<=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("12")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" \\")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("                ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("and")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("1")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("<=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" day ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("<=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("31")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("a_str ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"this is a long')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("\\")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#032F62"}},[t._v('         string"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## 'this is a long         string'")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("b_str ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"this is a long "')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("\\")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"string"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## 'this is a long string'")])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("p",[a("a",{attrs:{href:"https://docs.python.org/3/reference/lexical_analysis.html#explicit-line-joining",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lexical analysis — Python documentation > Explicit line joining"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"格式化字符串-string-format"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#格式化字符串-string-format"}},[t._v("#")]),t._v(" 格式化字符串 (string format)")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v('## Basics             ## use "·" to visualize whitespace')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#032F62"}},[t._v('"{} {}"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(".format(")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("1")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("2")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(")  ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "1·2"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{1}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{2}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "1·2"')])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v('## Each field can also specify an optional set of "format specifiers",')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v('## which goes after the colon ":"')])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## The default syntax")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## [[fill]align][sign][#][0][min_width][.precision][type]")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("##        │                                         └ e.g., b e f %")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("##        └ e.g., < > ^")])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## Padding and alignment")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("a ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"test"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("a")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":10")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("             ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "test······" (width 10)')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("a")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":<10")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "test······"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("a")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":>10")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "······test"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("a")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":^10")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "···test···"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("a")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":_<10")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("           ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "test______" (fill "_")')])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## Floats")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("b ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("0.5")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":5")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("              ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "··0.5" (`float` and `int` are right aligned by default)')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":<5")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("             ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "0.5··"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":05")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("             ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "000.5" (zero-padding)')])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":.3f")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "0.500"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{0.6666")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":.3f")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("       ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "0.667" (rounded)')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":.3e")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "5.000e-01"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":.2%")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "50.00%"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":6.2f")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("           ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "··0.50"')])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## Explicit type conversion")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("a")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("!s")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("              ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## equals f"{str(a)}"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("a")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("!r:10")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("           ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## equals f"{repr(a):10}"')])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":5")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("              ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "··0.5"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("!s:5")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "0.5··"')])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## The `datetime` class provides its own format specification")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("c ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" datetime.now()")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("c:")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("%")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("Y")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("-%")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("m")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("-%")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("d")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("       ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "2022-02-17" (just like in the `strftime()` function)')])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("## Self-documenting expressions with `=` (New in Python 3.8)")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("theta ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("30")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("theta")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v(", ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("cos(radians(theta))")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=:.3f")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("  ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "theta=30, cos(radians(theta))=0.866"')])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("p",[t._v("Format specifiers may also contain evaluated expressions.")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("width     ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("8")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("precision ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("2")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("value     ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("12.3456")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("value")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v(":")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("width")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(".")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("precision")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "···12.35"')])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("div",{staticClass:"language-python extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#032F62"}},[t._v('"{first} {last}"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(".format(")]),a("span",{staticStyle:{color:"#E36209"}},[t._v("first")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"Hello"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),a("span",{staticStyle:{color:"#E36209"}},[t._v("last")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"world!"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(")  ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "Hello world!"')])]),t._v("\n"),a("span",{staticClass:"line"}),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("data ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" {")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"first"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(": ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"Hello"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"last"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(": ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"world!"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("}")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#032F62"}},[t._v('"{first} {last}"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(".format(")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("**")]),a("span",{staticStyle:{color:"#24292E"}},[t._v("data)                        ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v('## "Hello world!"')])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("p",[a("a",{attrs:{href:"https://pyformat.info/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PyFormat (intuitive examples)"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://strftime.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python strftime reference"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://www.python.org/dev/peps/pep-3101/#format-specifiers",target:"_blank",rel:"noopener noreferrer"}},[t._v("PEP 3101 -- Standard Format Specifiers"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://docs.python.org/3/whatsnew/3.8.html#f-strings-support-for-self-documenting-expressions-and-debugging",target:"_blank",rel:"noopener noreferrer"}},[t._v("What's New in Python 3.8"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"正则表达式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#正则表达式"}},[t._v("#")]),t._v(" 正则表达式")]),t._v(" "),a("p",[t._v("正则表达式本身就不多介绍了，见 "),a("a",{attrs:{href:"https://regex101.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("regex 101"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("首先值得一提的就是 Python "),a("mark",[t._v("raw string")]),t._v("，其中的反斜杠 "),a("code",[t._v("\\")]),t._v(" 不表示转义字符，而是 literal "),a("code",[t._v("\\")])]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("\\\\")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('d"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("==")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("r")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("\\d")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v("  ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("# True")])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("h3",{attrs:{id:"字符串替换resub"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串替换resub"}},[t._v("#")]),t._v(" 字符串替换"),a("span",{staticClass:"cn-font",attrs:{lang:"zh-CN"}},[t._v("——")]),a("code",[t._v("re.sub")])]),t._v(" "),a("p",[t._v("大部分时候我们仅仅只是想做个（正则）字符串替换"),a("br"),t._v(" "),a("code",[t._v("re.sub(pattern, repl, string, count=0, flags=0)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("pattern")]),t._v(" 要被换掉的模式")]),t._v(" "),a("li",[a("code",[t._v("repl")]),t._v(" 要换成的模式，可以是字符串（支持 backreference 如 "),a("code",[t._v("\\2")]),t._v("）或者函数")]),t._v(" "),a("li",[a("code",[t._v("string")]),t._v(" 要进行替换的字符串")])]),t._v(" "),a("p",[t._v("（"),a("code",[t._v("count")]),t._v(" 若非 0 则表示最大替换次数，"),a("code",[t._v("flags")]),t._v(" 对应正则表达式的 flags）")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("re.sub(")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("r")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("(.")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("*")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v(")")]),a("span",{staticStyle:{color:"#032F62"}},[t._v(" > ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("(.")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("*")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v(")")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("r")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#22863A"}},[t._v("\\2")]),a("span",{staticStyle:{color:"#032F62"}},[t._v(" < ")]),a("span",{staticStyle:{color:"#22863A"}},[t._v("\\1")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"a > b"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(")")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#6A737D"}},[t._v("# 'b < a'")])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("h3",{attrs:{id:"字符串匹配和提取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字符串匹配和提取"}},[t._v("#")]),t._v(" 字符串匹配和提取")]),t._v(" "),a("p",[a("code",[t._v("re.match")]),t._v(" 和 "),a("code",[t._v("re.search")]),t._v("，都接受参数 "),a("code",[t._v("(pattern, string, flags=0)")]),t._v("，返回 "),a("code",[t._v("None")]),t._v(" 或者 match 对象")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{staticClass:"shiki github-light",staticStyle:{"background-color":"#fff"},attrs:{tabindex:"0"}},[a("code",[a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("m ")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(" re.match(")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("r")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("(\\w")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("+")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v(")")]),a("span",{staticStyle:{color:"#032F62"}},[t._v(" ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("(\\w")]),a("span",{staticStyle:{color:"#D73A49"}},[t._v("+")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v(")")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),a("span",{staticStyle:{color:"#032F62"}},[t._v('"Isaac Newton, physicist"')]),a("span",{staticStyle:{color:"#24292E"}},[t._v(")")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("m.group(")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("0")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(")     ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("# 'Isaac Newton'       The entire match")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("m.group(")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("1")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(")     ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("# 'Isaac'              The first parenthesized subgroup.")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("m.group(")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("2")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(")     ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("# 'Newton'             The second parenthesized subgroup.")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("m.group(")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("1")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),a("span",{staticStyle:{color:"#005CC5"}},[t._v("2")]),a("span",{staticStyle:{color:"#24292E"}},[t._v(")  ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("# ('Isaac', 'Newton')  Multiple arguments give us a tuple.")])]),t._v("\n"),a("span",{staticClass:"line"},[a("span",{staticStyle:{color:"#24292E"}},[t._v("m.groups()     ")]),a("span",{staticStyle:{color:"#6A737D"}},[t._v("# ('Isaac', 'Newton')  All subgroups in a tuple.")])]),t._v("\n"),a("span",{staticClass:"line"})])])]),a("p",[a("code",[t._v("re.match")]),t._v(" 要求 "),a("code",[t._v("pattern")]),t._v(" 出现在字符串 "),a("code",[t._v("string")]),t._v(" 的开头，"),a("code",[t._v("re.search")]),t._v(" 则允许其出现在字符串的任意位置")]),t._v(" "),a("p",[t._v("如果需要多次使用某个正则表达式，可以用 "),a("code",[t._v("re.compile()")]),t._v(" 来生成一个 pattern 对象，其同样可以使用上面这些函数 "),a("code",[t._v("sub/match/search")]),t._v("，甚至更精细的功能。")]),t._v(" "),a("h3",{attrs:{id:"其它字符串分割"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其它字符串分割"}},[t._v("#")]),t._v(" 其它：字符串分割")]),t._v(" "),a("p",[a("code",[t._v("re.split(pattern, string, maxsplit=0, flags=0)")])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.python.org/3/library/re.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Regular expression operations - Python documentation"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=o.exports}}]);