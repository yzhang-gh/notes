<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Minimax | Notes</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Notes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/notes/assets/css/0.styles.60ecb326.css" as="style"><link rel="preload" href="/notes/assets/js/app.943eb73b.js" as="script"><link rel="preload" href="/notes/assets/js/3.8465ba19.js" as="script"><link rel="preload" href="/notes/assets/js/8.eff1670d.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.74f6aed7.js"><link rel="prefetch" href="/notes/assets/js/100.034a3b93.js"><link rel="prefetch" href="/notes/assets/js/101.7a58913c.js"><link rel="prefetch" href="/notes/assets/js/102.09374552.js"><link rel="prefetch" href="/notes/assets/js/103.11ba2dc4.js"><link rel="prefetch" href="/notes/assets/js/104.60a5964b.js"><link rel="prefetch" href="/notes/assets/js/105.86967dd8.js"><link rel="prefetch" href="/notes/assets/js/106.6862691f.js"><link rel="prefetch" href="/notes/assets/js/11.a46c7ced.js"><link rel="prefetch" href="/notes/assets/js/12.c3e4fc46.js"><link rel="prefetch" href="/notes/assets/js/13.674a5639.js"><link rel="prefetch" href="/notes/assets/js/14.fbcf5a64.js"><link rel="prefetch" href="/notes/assets/js/15.5cffcf67.js"><link rel="prefetch" href="/notes/assets/js/16.338f7843.js"><link rel="prefetch" href="/notes/assets/js/17.99d0dc21.js"><link rel="prefetch" href="/notes/assets/js/18.7a01ab35.js"><link rel="prefetch" href="/notes/assets/js/19.2feeedce.js"><link rel="prefetch" href="/notes/assets/js/2.71c806c6.js"><link rel="prefetch" href="/notes/assets/js/20.d918ee7b.js"><link rel="prefetch" href="/notes/assets/js/21.e5104b76.js"><link rel="prefetch" href="/notes/assets/js/22.2d4b2f2a.js"><link rel="prefetch" href="/notes/assets/js/23.185dc70a.js"><link rel="prefetch" href="/notes/assets/js/24.2d25e73e.js"><link rel="prefetch" href="/notes/assets/js/25.e7452036.js"><link rel="prefetch" href="/notes/assets/js/26.bea8aa87.js"><link rel="prefetch" href="/notes/assets/js/27.4f3903f2.js"><link rel="prefetch" href="/notes/assets/js/28.902dbaee.js"><link rel="prefetch" href="/notes/assets/js/29.3deb033b.js"><link rel="prefetch" href="/notes/assets/js/30.d8646ab5.js"><link rel="prefetch" href="/notes/assets/js/31.fec58167.js"><link rel="prefetch" href="/notes/assets/js/32.7dc85083.js"><link rel="prefetch" href="/notes/assets/js/33.c8ed5fae.js"><link rel="prefetch" href="/notes/assets/js/34.6e5ee31a.js"><link rel="prefetch" href="/notes/assets/js/35.ccec245a.js"><link rel="prefetch" href="/notes/assets/js/36.4789f477.js"><link rel="prefetch" href="/notes/assets/js/37.fcd1b611.js"><link rel="prefetch" href="/notes/assets/js/38.e50f556c.js"><link rel="prefetch" href="/notes/assets/js/39.c9da1f8c.js"><link rel="prefetch" href="/notes/assets/js/4.c2282a97.js"><link rel="prefetch" href="/notes/assets/js/40.ecd0969b.js"><link rel="prefetch" href="/notes/assets/js/41.d895d699.js"><link rel="prefetch" href="/notes/assets/js/42.a8f85480.js"><link rel="prefetch" href="/notes/assets/js/43.b0195426.js"><link rel="prefetch" href="/notes/assets/js/44.9bafeff7.js"><link rel="prefetch" href="/notes/assets/js/45.fc069068.js"><link rel="prefetch" href="/notes/assets/js/46.15dac1e7.js"><link rel="prefetch" href="/notes/assets/js/47.3b8c13e7.js"><link rel="prefetch" href="/notes/assets/js/48.9149ea6f.js"><link rel="prefetch" href="/notes/assets/js/49.22096f41.js"><link rel="prefetch" href="/notes/assets/js/5.0a40a8cc.js"><link rel="prefetch" href="/notes/assets/js/50.2ce15617.js"><link rel="prefetch" href="/notes/assets/js/51.ff2268fc.js"><link rel="prefetch" href="/notes/assets/js/52.c0beff8b.js"><link rel="prefetch" href="/notes/assets/js/53.5d9024f6.js"><link rel="prefetch" href="/notes/assets/js/54.a603a0a1.js"><link rel="prefetch" href="/notes/assets/js/55.73ed4382.js"><link rel="prefetch" href="/notes/assets/js/56.3d2bcd4a.js"><link rel="prefetch" href="/notes/assets/js/57.167a12d5.js"><link rel="prefetch" href="/notes/assets/js/58.93bcace4.js"><link rel="prefetch" href="/notes/assets/js/59.0820fe49.js"><link rel="prefetch" href="/notes/assets/js/6.773bcde9.js"><link rel="prefetch" href="/notes/assets/js/60.a5f5280b.js"><link rel="prefetch" href="/notes/assets/js/61.3b526050.js"><link rel="prefetch" href="/notes/assets/js/62.005a7608.js"><link rel="prefetch" href="/notes/assets/js/63.86548806.js"><link rel="prefetch" href="/notes/assets/js/64.7b4e206a.js"><link rel="prefetch" href="/notes/assets/js/65.9e44cd94.js"><link rel="prefetch" href="/notes/assets/js/66.21e77cb2.js"><link rel="prefetch" href="/notes/assets/js/67.e88c090f.js"><link rel="prefetch" href="/notes/assets/js/68.8b474706.js"><link rel="prefetch" href="/notes/assets/js/69.eebbdf3f.js"><link rel="prefetch" href="/notes/assets/js/7.76782ec6.js"><link rel="prefetch" href="/notes/assets/js/70.de49f577.js"><link rel="prefetch" href="/notes/assets/js/71.db75ed0c.js"><link rel="prefetch" href="/notes/assets/js/72.b1aeee29.js"><link rel="prefetch" href="/notes/assets/js/73.8e2a2dc8.js"><link rel="prefetch" href="/notes/assets/js/74.a7643b30.js"><link rel="prefetch" href="/notes/assets/js/75.411c51c2.js"><link rel="prefetch" href="/notes/assets/js/76.9cb71875.js"><link rel="prefetch" href="/notes/assets/js/77.0abca309.js"><link rel="prefetch" href="/notes/assets/js/78.09f80d14.js"><link rel="prefetch" href="/notes/assets/js/79.b618d8d6.js"><link rel="prefetch" href="/notes/assets/js/80.3f304dd0.js"><link rel="prefetch" href="/notes/assets/js/81.5e1d22e3.js"><link rel="prefetch" href="/notes/assets/js/82.ebcf132b.js"><link rel="prefetch" href="/notes/assets/js/83.6c998c48.js"><link rel="prefetch" href="/notes/assets/js/84.1bb8ff9f.js"><link rel="prefetch" href="/notes/assets/js/85.915463e8.js"><link rel="prefetch" href="/notes/assets/js/86.54830d70.js"><link rel="prefetch" href="/notes/assets/js/87.4e330a2c.js"><link rel="prefetch" href="/notes/assets/js/88.859b8d56.js"><link rel="prefetch" href="/notes/assets/js/89.31aa01fb.js"><link rel="prefetch" href="/notes/assets/js/9.7bbf0480.js"><link rel="prefetch" href="/notes/assets/js/90.9382184f.js"><link rel="prefetch" href="/notes/assets/js/91.8bb2e809.js"><link rel="prefetch" href="/notes/assets/js/92.44badc72.js"><link rel="prefetch" href="/notes/assets/js/93.091e597a.js"><link rel="prefetch" href="/notes/assets/js/94.eb6ff046.js"><link rel="prefetch" href="/notes/assets/js/95.bccd7cb6.js"><link rel="prefetch" href="/notes/assets/js/96.b8e239ca.js"><link rel="prefetch" href="/notes/assets/js/97.f5f281d8.js"><link rel="prefetch" href="/notes/assets/js/98.90797ed2.js"><link rel="prefetch" href="/notes/assets/js/99.98568f98.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.60ecb326.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><!----> <span class="site-name">Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ML and Math" class="dropdown-title"><span class="title">ML and Math</span> <span class="arrow down"></span></button> <button type="button" aria-label="ML and Math" class="mobile-dropdown-title"><span class="title">ML and Math</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/ml/" class="nav-link">
  Machine Learning
</a></li><li class="dropdown-item"><!----> <a href="/notes/math/" class="nav-link">
  Math
</a></li></ul></div></div><div class="nav-item"><a href="/notes/software/" class="nav-link">
  Software and Tools
</a></div><div class="nav-item"><a href="/notes/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/notes/langs/" class="nav-link">
  Languages
</a></div><div class="nav-item"><a href="/notes/reading/" class="nav-link">
  Reading
</a></div><div class="nav-item"><a href="/notes/others/" class="nav-link router-link-active">
  Others
</a></div> <a href="https://github.com/yzhang-gh/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ML and Math" class="dropdown-title"><span class="title">ML and Math</span> <span class="arrow down"></span></button> <button type="button" aria-label="ML and Math" class="mobile-dropdown-title"><span class="title">ML and Math</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/ml/" class="nav-link">
  Machine Learning
</a></li><li class="dropdown-item"><!----> <a href="/notes/math/" class="nav-link">
  Math
</a></li></ul></div></div><div class="nav-item"><a href="/notes/software/" class="nav-link">
  Software and Tools
</a></div><div class="nav-item"><a href="/notes/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/notes/langs/" class="nav-link">
  Languages
</a></div><div class="nav-item"><a href="/notes/reading/" class="nav-link">
  Reading
</a></div><div class="nav-item"><a href="/notes/others/" class="nav-link router-link-active">
  Others
</a></div> <a href="https://github.com/yzhang-gh/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Misc.</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/others/characters.html" class="sidebar-link">常用特殊字符</a></li><li><a href="/notes/others/genetics.html" class="sidebar-link">遗传学知识回顾 (genetics)</a></li><li><a href="/notes/others/minimax.html" aria-current="page" class="active sidebar-link">Minimax</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/others/minimax.html#问题定义" class="sidebar-link">问题定义</a></li><li class="sidebar-sub-header"><a href="/notes/others/minimax.html#minimax-算法" class="sidebar-link">Minimax 算法</a></li><li class="sidebar-sub-header"><a href="/notes/others/minimax.html#alpha-beta-剪枝" class="sidebar-link">Alpha-Beta 剪枝</a></li><li class="sidebar-sub-header"><a href="/notes/others/minimax.html#其它" class="sidebar-link">其它</a></li><li class="sidebar-sub-header"><a href="/notes/others/minimax.html#阅读材料" class="sidebar-link">阅读材料</a></li></ul></li><li><a href="/notes/others/p-np.html" class="sidebar-link">P、NP 与 NP 完全问题</a></li><li><a href="/notes/others/literature-review-the-hard-way.html" class="sidebar-link">Literature Review the Hard Way</a></li><li><a href="/notes/others/misc.html" class="sidebar-link">无题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Life</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/others/2015-summary.html" class="sidebar-link">2015 Summary</a></li><li><a href="/notes/others/2018-uk.html" class="sidebar-link">2018 in the UK</a></li><li><a href="/notes/others/glasses.html" class="sidebar-link">配眼镜攻略</a></li><li><a href="/notes/others/interesting-stuff.html" class="sidebar-link">Interesting Stuff</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="minimax"><a href="#minimax" class="header-anchor">#</a> Minimax</h1> <link rel="stylesheet" href="/notes/katex.min.css"> <p>Minimax 算法常用于「有限状态，零和，完全信息（，两人）」博弈问题，比如棋类</p> <h2 id="问题定义"><a href="#问题定义" class="header-anchor">#</a> 问题定义</h2> <h3 id="输入"><a href="#输入" class="header-anchor">#</a> 输入</h3> <ul><li><mark>可能的状态</mark> <strong>state</strong>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>∈</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">s \in S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span>（棋盘的局面）</li> <li><mark>允许的动作</mark> <strong>action</strong>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a \in A(s)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span>（即可以落子的位置）</li> <li>A <mark>transition model</mark>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mspace></mspace><mspace width="0.1111em"></mspace><mo lspace="0em" rspace="0.17em"></mo><mtext> ⁣</mtext><mo lspace="0em" rspace="0em">:</mo><mspace width="0.3333em"></mspace><mi>S</mi><mo>×</mo><mi>A</mi><mo>→</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">T(s, a) \colon S \times A \to S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace nobreak"></span><span class="mspace" style="margin-right:0.1111em;"></span><span class="mpunct"></span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mrel">:</span></span><span class="mspace" style="margin-right:0.3333em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span>（比如黑白棋的翻转，围棋的提子）</li> <li><mark>效用函数</mark> <strong>utility function</strong>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>p</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">u(s,p)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">u</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span><span class="mclose">)</span></span></span></span>，即玩家 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> 在游戏结束时（状态 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span>）获得的「收益」</li></ul> <p>其中前三者决定了 <strong>game tree</strong>（博弈树），也即搜索空间</p> <figure><img src="/notes/assets/img/game-tree.a8ccc95d.webp" alt=""> <figcaption>A branch of a game tree. (source: <a href="https://www.5dchesswithmultiversetimetravel.com/" target="_blank" rel="noopener noreferrer" class="outbound">5D Chess With Multiverse Time Travel</a>)</figcaption></figure> <h3 id="输出"><a href="#输出" class="header-anchor">#</a> 输出</h3> <ul><li><mark>策略</mark> <strong>strategy</strong>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mspace></mspace><mspace width="0.1111em"></mspace><mo lspace="0em" rspace="0.17em"></mo><mtext> ⁣</mtext><mo lspace="0em" rspace="0em">:</mo><mspace width="0.3333em"></mspace><mi>S</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">\pi(s) \colon S \to A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace nobreak"></span><span class="mspace" style="margin-right:0.1111em;"></span><span class="mpunct"></span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mrel">:</span></span><span class="mspace" style="margin-right:0.3333em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>，即在给定状态（棋局）下选择一个动作（落子）</li></ul> <h2 id="minimax-算法"><a href="#minimax-算法" class="header-anchor">#</a> Minimax 算法</h2> <p>在零和博弈的设定下，玩家一的目标为最大化自己的收益 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>max</mi><mo>⁡</mo><msub><mi>u</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\max u_1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mop">max</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，玩家二的目标则等价于最小化玩家一的收益 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>min</mi><mo>⁡</mo><msub><mi>u</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\min u_1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8179em;vertical-align:-0.15em;"></span><span class="mop">min</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，方便起见分别称为玩家 Max 和 Min。给定一个 game tree，最优策略可以由每个节点的 <strong>minimax 值</strong>决定</p> <ul><li><mark>Minimax 值</mark>，一个递归定义的值，表示从当前状态 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span> 开始，双方均采取最优策略直至游戏结束时玩家一 (Max) 的<strong>效用值</strong><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>minimax</mtext><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>u</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mtext mathvariant="monospace">Max</mtext><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if GameOver</mtext><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mrow><mi>max</mi><mo>⁡</mo></mrow><mrow><mi>a</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow></msub><mtext>minimax</mtext><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal">′</mo></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mtext mathvariant="monospace">Max</mtext><mtext>’s turn</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mrow><mi>min</mi><mo>⁡</mo></mrow><mrow><mi>a</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow></msub><mtext>minimax</mtext><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal">′</mo></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mtext mathvariant="monospace">Min</mtext><mtext>’s turn</mtext></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\text{minimax}(s) = \begin{cases}
  u(s, \texttt{Max})                         &amp; \text{if GameOver}(s) \\
  \max_{a \in A(s)} \text{minimax}(s^\prime) &amp; \text{if }\texttt{Max}\text{'s turn} \\
  \min_{a \in A(s)}\text{minimax}(s^\prime) &amp; \text{if }\texttt{Min}\text{'s turn} \\
\end{cases}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">minimax</span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:4.32em;vertical-align:-1.91em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-2.2em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-2.192em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.316em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.316em" viewBox="0 0 888.89 316" preserveAspectRatio="xMinYMin" style="width:0.8889em;"><path d="M384 0 H504 V316 H384z M384 0 H504 V316 H384z"></path></svg></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.292em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.316em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.316em" viewBox="0 0 888.89 316" preserveAspectRatio="xMinYMin" style="width:0.8889em;"><path d="M384 0 H504 V316 H384z M384 0 H504 V316 H384z"></path></svg></span></span><span style="top:-4.6em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord texttt">Max</span></span><span class="mclose">)</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mop"><span class="mop">max</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mrel mtight">∈</span><span class="mord mathnormal mtight">A</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">s</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord">minimax</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-1.53em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mop"><span class="mop">min</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mrel mtight">∈</span><span class="mord mathnormal mtight">A</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">s</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord">minimax</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.91em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if GameOver</span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span></span><span class="mord text"><span class="mord texttt">Max</span></span><span class="mord text"><span class="mord">’s turn</span></span></span></span><span style="top:-1.53em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span></span><span class="mord text"><span class="mord texttt">Min</span></span><span class="mord text"><span class="mord">’s turn</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.91em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>s</mi><mo mathvariant="normal">′</mo></msup><mo>=</mo><mi>T</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">s^\prime=T(s,a)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></li></ul> <p>从上述定义中不难看出，计算 minimax 值时需要沿着 game tree 一直推演（深度优先）至叶子节点（游戏结束），然后回溯计算出之前每个节点的值。一个节点只要计算出了 minimax 值，就已经看到了游戏的结局（效用值）──假如对手 (Min) 也采取最优策略的话。如果 Min 不采取最优策略，Max 仍然采取 minimax 策略，Max 的最终效用只会更高（不一定最优）。</p> <figure><img src="/notes/assets/img/doctor-strange.dee03d74.jpg" alt="Dr. Strange" width="400px"> <figcaption>然后算出了 minimax 值</figcaption></figure> <p>假设 game tree 的深度为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span>，每个节点有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span> 种走法，则该算法的时间复杂度为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>b</mi><mi>m</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(b^m)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，在实际情况中是不现实的。</p> <details class="custom-block details"><summary>Python 代码</summary> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## https://github.com/aimacode/aima-python/blob/master/games.py</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">minmax_decision</span><span style="color:#24292E;">(state, game):</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;&quot;&quot;Given a state in a game, calculate the best move by searching</span></span>
<span class="line"><span style="color:#032F62;">    forward all the way to the terminal states. [Figure 5.3]&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    player </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> game.to_move(state)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">max_value</span><span style="color:#24292E;">(state):</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> game.terminal_test(state):</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> game.utility(state, player)</span></span>
<span class="line"><span style="color:#24292E;">        v </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">np.inf</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> a </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> game.actions(state):</span></span>
<span class="line"><span style="color:#24292E;">            v </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">max</span><span style="color:#24292E;">(v, min_value(game.result(state, a)))</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> v</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">min_value</span><span style="color:#24292E;">(state):</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> game.terminal_test(state):</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> game.utility(state, player)</span></span>
<span class="line"><span style="color:#24292E;">        v </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> np.inf</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> a </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> game.actions(state):</span></span>
<span class="line"><span style="color:#24292E;">            v </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">min</span><span style="color:#24292E;">(v, max_value(game.result(state, a)))</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> v</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># Body of minmax_decision:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">max</span><span style="color:#24292E;">(game.actions(state), </span><span style="color:#E36209;">key</span><span style="color:#D73A49;">=lambda</span><span style="color:#24292E;"> a: min_value(game.result(state, a)))</span></span>
<span class="line"></span></code></pre></div></details> <h2 id="alpha-beta-剪枝"><a href="#alpha-beta-剪枝" class="header-anchor">#</a> Alpha-Beta 剪枝</h2> <p>假设我们当前处于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span> 节点，并且已经计算出了其一个<strong>直接子节点</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> 的 minimax 值，那么对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span> 的其它<strong>后代节点</strong>，如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>「差于」<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span>，那么 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 节点肯定不是最优路线了</p> <figure><img src="/notes/assets/img/alpha-beta-general-case.b0d3cdf2.png" alt="" class="border"> <figcaption>Alpha-beta 剪枝原理</figcaption></figure> <p>具体来说，对于一个 Max 节点（例如 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span>），每计算出一个子节点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">m_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 都会更新 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span> 的下限（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>≥</mo><mi>α</mi></mrow><annotation encoding="application/x-tex">s \ge \alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>），其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mo>=</mo><mtext>max</mtext><mo stretchy="false">(</mo><msub><mi>m</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>m</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>…</mo><mtext></mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\alpha=\text{max}(m_1,m_2,\dots)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">max</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">)</span></span></span></span>。在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span> 还未探索的后代节点中，如果发现某个节点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>≤</mo><mi>α</mi></mrow><annotation encoding="application/x-tex">n\le\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>，也就表明其肯定不是最优解，其后续分支也可以剪掉（即无需再考察 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 的其它子节点）。而想要确定 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>≤</mo><mi>α</mi></mrow><annotation encoding="application/x-tex">n\le\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>，需要两个条件：① <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 是 Min 节点，② <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 的一个子节点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>n</mi><mo mathvariant="normal">′</mo></msup><mo>≤</mo><mi>α</mi></mrow><annotation encoding="application/x-tex">n^\prime\le\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8879em;vertical-align:-0.136em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>。<br>
（简而言之，在 Max 节点中更新已知最小效益 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>，在其后代的 Min 节点中发现小于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span> 的效益时剪枝，即直接 return）</p> <p>同理，假如 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span> 是 Min 节点，已知的子节点会确定 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span> 的上限（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>≤</mo><mi>β</mi></mrow><annotation encoding="application/x-tex">s \le \beta</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span></span></span></span>），<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi><mo>=</mo><mtext>min</mtext><mo stretchy="false">(</mo><msub><mi>m</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>m</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>…</mo><mtext></mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\beta=\text{min}(m_1,m_2,\dots)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">min</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">)</span></span></span></span>。剪枝只会发生在其后代的某个 Max 节点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>，如果发现 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>≥</mo><mo stretchy="false">)</mo><mtext></mtext><msup><mi>n</mi><mo mathvariant="normal">′</mo></msup><mo>≥</mo><mi>β</mi></mrow><annotation encoding="application/x-tex">(n\ge)\,n^\prime\ge\beta</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span></span><span class="base"><span class="strut" style="height:1.0019em;vertical-align:-0.25em;"></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span></span></span></span>。</p> <p>每个节点的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span></span></span></span> 值继承于它的父节点。</p> <details class="custom-block details"><summary>A step-by-step example</summary> <p><img src="/notes/assets/img/alpha-beta-example.0511641b.png" alt="example"></p></details> <details class="custom-block details"><summary>Python 代码</summary> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## https://github.com/aimacode/aima-python/blob/master/games.py</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">alpha_beta_search</span><span style="color:#24292E;">(state, game):</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;&quot;&quot;Search game to determine best action; use alpha-beta pruning.</span></span>
<span class="line"><span style="color:#032F62;">    As in [Figure 5.7], this version searches all the way to the leaves.&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    player </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> game.to_move(state)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># Functions used by alpha_beta</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">max_value</span><span style="color:#24292E;">(state, alpha, beta):</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> game.terminal_test(state):</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> game.utility(state, player)</span></span>
<span class="line"><span style="color:#24292E;">        v </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">np.inf</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> a </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> game.actions(state):</span></span>
<span class="line"><span style="color:#24292E;">            v </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">max</span><span style="color:#24292E;">(v, min_value(game.result(state, a), alpha, beta))</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> v </span><span style="color:#D73A49;">&gt;=</span><span style="color:#24292E;"> beta:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> v</span></span>
<span class="line"><span style="color:#24292E;">            alpha </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">max</span><span style="color:#24292E;">(alpha, v)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> v</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">min_value</span><span style="color:#24292E;">(state, alpha, beta):</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> game.terminal_test(state):</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> game.utility(state, player)</span></span>
<span class="line"><span style="color:#24292E;">        v </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> np.inf</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> a </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> game.actions(state):</span></span>
<span class="line"><span style="color:#24292E;">            v </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">min</span><span style="color:#24292E;">(v, max_value(game.result(state, a), alpha, beta))</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> v </span><span style="color:#D73A49;">&lt;=</span><span style="color:#24292E;"> alpha:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> v</span></span>
<span class="line"><span style="color:#24292E;">            beta </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">min</span><span style="color:#24292E;">(beta, v)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> v</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># Body of alpha_beta_search:</span></span>
<span class="line"><span style="color:#24292E;">    best_score </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">np.inf</span></span>
<span class="line"><span style="color:#24292E;">    beta </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> np.inf</span></span>
<span class="line"><span style="color:#24292E;">    best_action </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">None</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> a </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> game.actions(state):</span></span>
<span class="line"><span style="color:#24292E;">        v </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> min_value(game.result(state, a), best_score, beta)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> v </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> best_score:</span></span>
<span class="line"><span style="color:#24292E;">            best_score </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> v</span></span>
<span class="line"><span style="color:#24292E;">            best_action </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> a</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> best_action</span></span>
<span class="line"></span></code></pre></div></details> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>即使使用了 alpha-beta 剪枝，在实际中也基本不可能搜索到游戏结束，这就需要使用<strong>启发式</strong><mark>评估函数</mark> (heuristic evaluation function) 来代替游戏结束时的效用函数，这里不再展开。</p></div> <h2 id="其它"><a href="#其它" class="header-anchor">#</a> 其它</h2> <p>在搜索资料的时候偶然发现 LeetCode 上也有一些 <a href="https://leetcode.com/tag/minimax/" target="_blank" rel="noopener noreferrer">minimax 相关的题目<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，比如</p> <blockquote><p><a href="https://leetcode-cn.com/problems/predict-the-winner" target="_blank" rel="noopener noreferrer">486. 预测赢家<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>给定一个表示分数的非负整数数组。 玩家一从数组任意一端拿取一个分数，随后玩家二继续从剩余数组任意一端拿取分数，然后玩家一拿，…… 。每次一个玩家只能拿取一个分数，分数被拿取之后不再可取。直到没有剩余分数可取时游戏结束。最终获得分数总和最多的玩家获胜。</p> <p>给定一个表示分数的数组，预测玩家一是否会成为赢家（包括平局）。你可以假设每个玩家的玩法都会使他的分数最大化。</p> <p><strong>示例：</strong></p> <div class="language- extra-class"><pre><code>输入：[1, 5, 2]
输出：False

输入：[1, 5, 233, 7]
输出：True
</code></pre></div></blockquote> <details class="custom-block details"><summary>最朴素 minimax 解法</summary> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Solution</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PredictTheWinner</span><span style="color:#24292E;">(self, nums: List[</span><span style="color:#005CC5;">int</span><span style="color:#24292E;">]) -&gt; </span><span style="color:#005CC5;">bool</span><span style="color:#24292E;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        l </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">len</span><span style="color:#24292E;">(nums)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> l </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">True</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">max_value</span><span style="color:#24292E;">(i, j, hist_sum):</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> j:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> hist_sum </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> nums[i]</span></span>
<span class="line"><span style="color:#24292E;">            v_i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> min_value(i </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, j, hist_sum </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> nums[i])</span></span>
<span class="line"><span style="color:#24292E;">            v_j </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> min_value(i, j </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, hist_sum </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> nums[j])</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">max</span><span style="color:#24292E;">(v_i, v_j)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">min_value</span><span style="color:#24292E;">(i, j, hist_sum):</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> j:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> hist_sum</span></span>
<span class="line"><span style="color:#24292E;">            v_i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> max_value(i </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, j, hist_sum)</span></span>
<span class="line"><span style="color:#24292E;">            v_j </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> max_value(i, j </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, hist_sum)</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">min</span><span style="color:#24292E;">(v_i, v_j)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        v_0 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> min_value(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, l </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, nums[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">])</span></span>
<span class="line"><span style="color:#24292E;">        v__1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> min_value(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, l </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, nums[l </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">])</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">max</span><span style="color:#24292E;">(v_0, v__1) </span><span style="color:#D73A49;">&gt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sum</span><span style="color:#24292E;">(nums) </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span></span>
<span class="line"></span></code></pre></div></details> <p>然后一运行，<img src="data:image/webp;base64,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" alt="好家伙" title="好家伙（来源：b 站）" width="50" class="no-zoom" style="vertical-align:text-bottom;">，直接倒数</p> <blockquote><p>执行用时: 5012 ms (beats 13.11% of python3 submissions)<br>
内存消耗: 14.1 MB</p></blockquote> <p>假如依据题目特性提前剪枝（<code>max_value</code> 和 <code>min_value</code> 函数中）</p> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> hist_sum </span><span style="color:#D73A49;">&gt;=</span><span style="color:#24292E;"> half_sum:  </span><span style="color:#6A737D;">## sum(nums) / 2</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> hist_sum</span></span>
<span class="line"></span></code></pre></div><blockquote><p>执行用时: 4280 ms (beats 22.67% of python3 submissions)<br>
内存消耗: 13.6 MB</p></blockquote> <p>好了一丢丢，但是还是不太行</p> <p>那么既然有递归（和很多重复计算的可能性），加一点缓存如何？（注意缓存和剪枝有冲突，因为剪枝往往会依赖一些额外的 context，比如 <code>hist_sum</code>，<code>alpha/beta</code>，而缓存一般不会记录这些）</p> <details class="custom-block details"><summary>minimax + 缓存</summary> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Solution</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PredictTheWinner</span><span style="color:#24292E;">(self, nums: List[</span><span style="color:#005CC5;">int</span><span style="color:#24292E;">]) -&gt; </span><span style="color:#005CC5;">bool</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        l </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">len</span><span style="color:#24292E;">(nums)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> l </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">True</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        cache </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">max_value</span><span style="color:#24292E;">(i, j, hist_sum):</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> j:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> hist_sum </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> nums[i]</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">f</span><span style="color:#032F62;">&quot;</span><span style="color:#005CC5;">{</span><span style="color:#24292E;">i</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">-</span><span style="color:#005CC5;">{</span><span style="color:#24292E;">j</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> cache.keys():</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> cache.get(</span><span style="color:#D73A49;">f</span><span style="color:#032F62;">&quot;</span><span style="color:#005CC5;">{</span><span style="color:#24292E;">i</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">-</span><span style="color:#005CC5;">{</span><span style="color:#24292E;">j</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> hist_sum</span></span>
<span class="line"><span style="color:#24292E;">            v_i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> min_value(i </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, j, hist_sum </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> nums[i])</span></span>
<span class="line"><span style="color:#24292E;">            v_j </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> min_value(i, j </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, hist_sum </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> nums[j])</span></span>
<span class="line"><span style="color:#24292E;">            v </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">max</span><span style="color:#24292E;">(v_i, v_j)</span></span>
<span class="line"><span style="color:#24292E;">            cache.update({</span><span style="color:#D73A49;">f</span><span style="color:#032F62;">&quot;</span><span style="color:#005CC5;">{</span><span style="color:#24292E;">i</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">-</span><span style="color:#005CC5;">{</span><span style="color:#24292E;">j</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">: v </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> hist_sum})</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> v</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">min_value</span><span style="color:#24292E;">(i, j, hist_sum):</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> j:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> hist_sum</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">f</span><span style="color:#032F62;">&quot;</span><span style="color:#005CC5;">{</span><span style="color:#24292E;">i</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">-</span><span style="color:#005CC5;">{</span><span style="color:#24292E;">j</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> cache.keys():</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> cache.get(</span><span style="color:#D73A49;">f</span><span style="color:#032F62;">&quot;</span><span style="color:#005CC5;">{</span><span style="color:#24292E;">i</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">-</span><span style="color:#005CC5;">{</span><span style="color:#24292E;">j</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> hist_sum</span></span>
<span class="line"><span style="color:#24292E;">            v_i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> max_value(i </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, j, hist_sum)</span></span>
<span class="line"><span style="color:#24292E;">            v_j </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> max_value(i, j </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, hist_sum)</span></span>
<span class="line"><span style="color:#24292E;">            v </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">min</span><span style="color:#24292E;">(v_i, v_j)</span></span>
<span class="line"><span style="color:#24292E;">            cache.update({</span><span style="color:#D73A49;">f</span><span style="color:#032F62;">&quot;</span><span style="color:#005CC5;">{</span><span style="color:#24292E;">i</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">-</span><span style="color:#005CC5;">{</span><span style="color:#24292E;">j</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">: v </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> hist_sum})</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> v</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        v_0 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> min_value(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, l </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, nums[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">])</span></span>
<span class="line"><span style="color:#24292E;">        v__1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> min_value(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, l </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, nums[l </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">])</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">max</span><span style="color:#24292E;">(v_0, v__1) </span><span style="color:#D73A49;">&gt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sum</span><span style="color:#24292E;">(nums) </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span></span>
<span class="line"></span></code></pre></div></details> <blockquote><p>执行用时: 44~48 ms (74%~54%)<br>
内存消耗: 14 MB</p></blockquote> <p>好了很多，但是还是不够。其它细节比如：数组长度为偶数时玩家一必胜。另外还有动态规划视角的解法（TODO）。</p> <h2 id="阅读材料"><a href="#阅读材料" class="header-anchor">#</a> 阅读材料</h2> <ul><li>Stuart Russell and Peter Norvig. Artificial Intelligence: A Modern Approach. <em>Prentice Hall</em>. 3rd 2009.<br>
(Chapter 5: Adversarial Search)</li></ul> <p>扩展阅读</p> <ul><li>⭐ <a href="https://zhuanlan.zhihu.com/p/31809930" target="_blank" rel="noopener noreferrer">浅述：从 Minimax 到 AlphaZero，完全信息博弈之路 - 知乎专栏<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last updated:</span> <span class="time">8/6/2021, 1:34:55 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/others/genetics.html" class="prev">
        遗传学知识回顾 (genetics)
      </a></span> <span class="next"><a href="/notes/others/p-np.html">
        P、NP 与 NP 完全问题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/notes/assets/js/app.943eb73b.js" defer></script><script src="/notes/assets/js/3.8465ba19.js" defer></script><script src="/notes/assets/js/8.eff1670d.js" defer></script>
  </body>
</html>
