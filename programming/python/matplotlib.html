<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Matplotlib | Notes</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Notes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/notes/assets/css/0.styles.60ecb326.css" as="style"><link rel="preload" href="/notes/assets/js/app.943eb73b.js" as="script"><link rel="preload" href="/notes/assets/js/3.8465ba19.js" as="script"><link rel="preload" href="/notes/assets/js/12.c3e4fc46.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.74f6aed7.js"><link rel="prefetch" href="/notes/assets/js/100.034a3b93.js"><link rel="prefetch" href="/notes/assets/js/101.7a58913c.js"><link rel="prefetch" href="/notes/assets/js/102.09374552.js"><link rel="prefetch" href="/notes/assets/js/103.11ba2dc4.js"><link rel="prefetch" href="/notes/assets/js/104.60a5964b.js"><link rel="prefetch" href="/notes/assets/js/105.86967dd8.js"><link rel="prefetch" href="/notes/assets/js/106.6862691f.js"><link rel="prefetch" href="/notes/assets/js/11.a46c7ced.js"><link rel="prefetch" href="/notes/assets/js/13.674a5639.js"><link rel="prefetch" href="/notes/assets/js/14.fbcf5a64.js"><link rel="prefetch" href="/notes/assets/js/15.5cffcf67.js"><link rel="prefetch" href="/notes/assets/js/16.338f7843.js"><link rel="prefetch" href="/notes/assets/js/17.99d0dc21.js"><link rel="prefetch" href="/notes/assets/js/18.7a01ab35.js"><link rel="prefetch" href="/notes/assets/js/19.2feeedce.js"><link rel="prefetch" href="/notes/assets/js/2.71c806c6.js"><link rel="prefetch" href="/notes/assets/js/20.d918ee7b.js"><link rel="prefetch" href="/notes/assets/js/21.e5104b76.js"><link rel="prefetch" href="/notes/assets/js/22.2d4b2f2a.js"><link rel="prefetch" href="/notes/assets/js/23.185dc70a.js"><link rel="prefetch" href="/notes/assets/js/24.2d25e73e.js"><link rel="prefetch" href="/notes/assets/js/25.e7452036.js"><link rel="prefetch" href="/notes/assets/js/26.bea8aa87.js"><link rel="prefetch" href="/notes/assets/js/27.4f3903f2.js"><link rel="prefetch" href="/notes/assets/js/28.902dbaee.js"><link rel="prefetch" href="/notes/assets/js/29.3deb033b.js"><link rel="prefetch" href="/notes/assets/js/30.d8646ab5.js"><link rel="prefetch" href="/notes/assets/js/31.fec58167.js"><link rel="prefetch" href="/notes/assets/js/32.7dc85083.js"><link rel="prefetch" href="/notes/assets/js/33.c8ed5fae.js"><link rel="prefetch" href="/notes/assets/js/34.6e5ee31a.js"><link rel="prefetch" href="/notes/assets/js/35.ccec245a.js"><link rel="prefetch" href="/notes/assets/js/36.4789f477.js"><link rel="prefetch" href="/notes/assets/js/37.fcd1b611.js"><link rel="prefetch" href="/notes/assets/js/38.e50f556c.js"><link rel="prefetch" href="/notes/assets/js/39.c9da1f8c.js"><link rel="prefetch" href="/notes/assets/js/4.c2282a97.js"><link rel="prefetch" href="/notes/assets/js/40.ecd0969b.js"><link rel="prefetch" href="/notes/assets/js/41.d895d699.js"><link rel="prefetch" href="/notes/assets/js/42.a8f85480.js"><link rel="prefetch" href="/notes/assets/js/43.b0195426.js"><link rel="prefetch" href="/notes/assets/js/44.9bafeff7.js"><link rel="prefetch" href="/notes/assets/js/45.fc069068.js"><link rel="prefetch" href="/notes/assets/js/46.15dac1e7.js"><link rel="prefetch" href="/notes/assets/js/47.3b8c13e7.js"><link rel="prefetch" href="/notes/assets/js/48.9149ea6f.js"><link rel="prefetch" href="/notes/assets/js/49.22096f41.js"><link rel="prefetch" href="/notes/assets/js/5.0a40a8cc.js"><link rel="prefetch" href="/notes/assets/js/50.2ce15617.js"><link rel="prefetch" href="/notes/assets/js/51.ff2268fc.js"><link rel="prefetch" href="/notes/assets/js/52.c0beff8b.js"><link rel="prefetch" href="/notes/assets/js/53.5d9024f6.js"><link rel="prefetch" href="/notes/assets/js/54.a603a0a1.js"><link rel="prefetch" href="/notes/assets/js/55.73ed4382.js"><link rel="prefetch" href="/notes/assets/js/56.3d2bcd4a.js"><link rel="prefetch" href="/notes/assets/js/57.167a12d5.js"><link rel="prefetch" href="/notes/assets/js/58.93bcace4.js"><link rel="prefetch" href="/notes/assets/js/59.0820fe49.js"><link rel="prefetch" href="/notes/assets/js/6.773bcde9.js"><link rel="prefetch" href="/notes/assets/js/60.a5f5280b.js"><link rel="prefetch" href="/notes/assets/js/61.3b526050.js"><link rel="prefetch" href="/notes/assets/js/62.005a7608.js"><link rel="prefetch" href="/notes/assets/js/63.86548806.js"><link rel="prefetch" href="/notes/assets/js/64.7b4e206a.js"><link rel="prefetch" href="/notes/assets/js/65.9e44cd94.js"><link rel="prefetch" href="/notes/assets/js/66.21e77cb2.js"><link rel="prefetch" href="/notes/assets/js/67.e88c090f.js"><link rel="prefetch" href="/notes/assets/js/68.8b474706.js"><link rel="prefetch" href="/notes/assets/js/69.eebbdf3f.js"><link rel="prefetch" href="/notes/assets/js/7.76782ec6.js"><link rel="prefetch" href="/notes/assets/js/70.de49f577.js"><link rel="prefetch" href="/notes/assets/js/71.db75ed0c.js"><link rel="prefetch" href="/notes/assets/js/72.b1aeee29.js"><link rel="prefetch" href="/notes/assets/js/73.8e2a2dc8.js"><link rel="prefetch" href="/notes/assets/js/74.a7643b30.js"><link rel="prefetch" href="/notes/assets/js/75.411c51c2.js"><link rel="prefetch" href="/notes/assets/js/76.9cb71875.js"><link rel="prefetch" href="/notes/assets/js/77.0abca309.js"><link rel="prefetch" href="/notes/assets/js/78.09f80d14.js"><link rel="prefetch" href="/notes/assets/js/79.b618d8d6.js"><link rel="prefetch" href="/notes/assets/js/8.eff1670d.js"><link rel="prefetch" href="/notes/assets/js/80.3f304dd0.js"><link rel="prefetch" href="/notes/assets/js/81.5e1d22e3.js"><link rel="prefetch" href="/notes/assets/js/82.ebcf132b.js"><link rel="prefetch" href="/notes/assets/js/83.6c998c48.js"><link rel="prefetch" href="/notes/assets/js/84.1bb8ff9f.js"><link rel="prefetch" href="/notes/assets/js/85.915463e8.js"><link rel="prefetch" href="/notes/assets/js/86.54830d70.js"><link rel="prefetch" href="/notes/assets/js/87.4e330a2c.js"><link rel="prefetch" href="/notes/assets/js/88.859b8d56.js"><link rel="prefetch" href="/notes/assets/js/89.31aa01fb.js"><link rel="prefetch" href="/notes/assets/js/9.7bbf0480.js"><link rel="prefetch" href="/notes/assets/js/90.9382184f.js"><link rel="prefetch" href="/notes/assets/js/91.8bb2e809.js"><link rel="prefetch" href="/notes/assets/js/92.44badc72.js"><link rel="prefetch" href="/notes/assets/js/93.091e597a.js"><link rel="prefetch" href="/notes/assets/js/94.eb6ff046.js"><link rel="prefetch" href="/notes/assets/js/95.bccd7cb6.js"><link rel="prefetch" href="/notes/assets/js/96.b8e239ca.js"><link rel="prefetch" href="/notes/assets/js/97.f5f281d8.js"><link rel="prefetch" href="/notes/assets/js/98.90797ed2.js"><link rel="prefetch" href="/notes/assets/js/99.98568f98.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.60ecb326.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><!----> <span class="site-name">Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ML and Math" class="dropdown-title"><span class="title">ML and Math</span> <span class="arrow down"></span></button> <button type="button" aria-label="ML and Math" class="mobile-dropdown-title"><span class="title">ML and Math</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/ml/" class="nav-link">
  Machine Learning
</a></li><li class="dropdown-item"><!----> <a href="/notes/math/" class="nav-link">
  Math
</a></li></ul></div></div><div class="nav-item"><a href="/notes/software/" class="nav-link">
  Software and Tools
</a></div><div class="nav-item"><a href="/notes/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/notes/langs/" class="nav-link">
  Languages
</a></div><div class="nav-item"><a href="/notes/reading/" class="nav-link">
  Reading
</a></div><div class="nav-item"><a href="/notes/others/" class="nav-link">
  Others
</a></div> <a href="https://github.com/yzhang-gh/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ML and Math" class="dropdown-title"><span class="title">ML and Math</span> <span class="arrow down"></span></button> <button type="button" aria-label="ML and Math" class="mobile-dropdown-title"><span class="title">ML and Math</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/ml/" class="nav-link">
  Machine Learning
</a></li><li class="dropdown-item"><!----> <a href="/notes/math/" class="nav-link">
  Math
</a></li></ul></div></div><div class="nav-item"><a href="/notes/software/" class="nav-link">
  Software and Tools
</a></div><div class="nav-item"><a href="/notes/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/notes/langs/" class="nav-link">
  Languages
</a></div><div class="nav-item"><a href="/notes/reading/" class="nav-link">
  Reading
</a></div><div class="nav-item"><a href="/notes/others/" class="nav-link">
  Others
</a></div> <a href="https://github.com/yzhang-gh/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/programming/python/miniconda.html" class="sidebar-link">Miniconda</a></li><li><a href="/notes/programming/python/matplotlib.html" aria-current="page" class="active sidebar-link">Matplotlib</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/programming/python/matplotlib.html#基本概念figure-与-axes" class="sidebar-link">基本概念：Figure 与 Axes</a></li><li class="sidebar-sub-header"><a href="/notes/programming/python/matplotlib.html#配置-configuration" class="sidebar-link">配置 (Configuration)</a></li><li class="sidebar-sub-header"><a href="/notes/programming/python/matplotlib.html#刻度-ticks" class="sidebar-link">刻度 (Ticks)</a></li><li class="sidebar-sub-header"><a href="/notes/programming/python/matplotlib.html#colormap" class="sidebar-link">Colormap</a></li><li class="sidebar-sub-header"><a href="/notes/programming/python/matplotlib.html#subplots" class="sidebar-link">Subplots</a></li><li class="sidebar-sub-header"><a href="/notes/programming/python/matplotlib.html#default-color-cycle" class="sidebar-link">Default Color Cycle</a></li><li class="sidebar-sub-header"><a href="/notes/programming/python/matplotlib.html#动画" class="sidebar-link">动画</a></li><li class="sidebar-sub-header"><a href="/notes/programming/python/matplotlib.html#pgf-格式与-latex" class="sidebar-link">PGF 格式与 LaTeX</a></li></ul></li><li><a href="/notes/programming/python/python.html" class="sidebar-link">Python</a></li><li><a href="/notes/programming/python/logging.html" class="sidebar-link">Logging</a></li><li><a href="/notes/programming/python/multi-and-sub-process.html" class="sidebar-link">Python 多进程与子进程</a></li><li><a href="/notes/programming/python/user-snippets.html" class="sidebar-link">Python 代码片段</a></li><li><a href="/notes/programming/python/cuda.html" class="sidebar-link">CUDA</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>LaTeX</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/programming/latex.html" class="sidebar-link">LaTeX</a></li><li><a href="/notes/programming/latex-nicematrix.html" class="sidebar-link">nicematrix</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="matplotlib"><a href="#matplotlib" class="header-anchor">#</a> Matplotlib</h1> <h2 id="基本概念figure-与-axes"><a href="#基本概念figure-与-axes" class="header-anchor">#</a> 基本概念：Figure 与 Axes</h2> <figure><img src="/notes/assets/img/fig-vs-axes.3b419194.png" alt=""> <figcaption>A <code>Figure</code> with 2 <code>Axes</code></figcaption></figure> <ul><li><code>Figure</code> 代表了整张图片 (<code>figure.savefig</code>)，像一个容器（可以设置 <code>figsize</code>，<code>dpi</code> 等）</li> <li><code>Axes</code> 则包括了<strong>真正要画的内容</strong>，比如坐标轴、折线、文本</li></ul> <p>Matplotlib 提供了两套 API：</p> <ul><li><code>pyplot</code> API，模仿 MATLAB 的语法风格，适合临时画图（一通 <code>plt.xxx</code> 搞定），</li> <li>面向对象风格的 API，显式地操作上述 <code>Figure</code>，<code>Axes</code> 对象，便于进行细节的控制和管理，特别是代码需要重复使用的时候。</li></ul> <p>前者 <code>plt.xxx</code> 相当于始终在「当前的」<code>Figure</code> 或 <code>Axes</code> 对象上操作，与 <code>ax.xxx</code> 或者 <code>ax.set_xxx</code> 相对应。</p> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> matplotlib.pyplot </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> plt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## 默认为一个 Axes/Subplot</span></span>
<span class="line"><span style="color:#24292E;">fig, ax </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> plt.subplots()  </span><span style="color:#6A737D;">## (nrows=1, ncols=1, ..., **fig_kw)</span></span>
<span class="line"><span style="color:#24292E;">ax.plot(x, y)</span></span>
<span class="line"><span style="color:#24292E;">fig.savefig(</span><span style="color:#032F62;">&quot;out.png&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## ==================</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## 多个 Axes，两行一列</span></span>
<span class="line"><span style="color:#24292E;">fig, (ax1, ax2) </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> plt.subplots(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">)  </span><span style="color:#6A737D;">## 使用 `constrained_layout=True` 避免 Axes 重叠</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">ax1.plot(x1, y1)</span></span>
<span class="line"><span style="color:#24292E;">ax1.set_title(</span><span style="color:#032F62;">&quot;Axes 1&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">ax2.plot(x2, y2)</span></span>
<span class="line"><span style="color:#24292E;">ax2.set_title(</span><span style="color:#032F62;">&quot;Axes 2&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">fig.suptitle(</span><span style="color:#032F62;">&quot;Figure&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">fig.savefig(</span><span style="color:#032F62;">&quot;out.png&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span></code></pre></div><hr> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><a href="https://github.com/matplotlib/cheatsheets" target="_blank" rel="noopener noreferrer">https://github.com/matplotlib/cheatsheets<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <h2 id="配置-configuration"><a href="#配置-configuration" class="header-anchor">#</a> 配置 (Configuration)</h2> <p>配置文件</p> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> matplotlib</span></span>
<span class="line"><span style="color:#005CC5;">print</span><span style="color:#24292E;">(matplotlib.matplotlib_fname())</span></span>
<span class="line"><span style="color:#6A737D;">## 'C:\Users\&lt;username&gt;\Miniconda3\lib\site-packages\matplotlib\mpl-data\matplotlibrc'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## User-level config file:</span></span>
<span class="line"><span style="color:#6A737D;">## 'C:\Users\&lt;username&gt;\.matplotlib\matplotlibrc'</span></span>
<span class="line"></span></code></pre></div><p>可以用来设置<strong>默认字体</strong></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><strong>新安装的字体</strong>可能会找不到，删掉 <code>$HOME\.matplotlib\fontlist-*.json</code> 缓存文件即可</p></div> <p>在程序中也可以进行配置，比如</p> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#24292E;">plt.rc(</span><span style="color:#032F62;">&quot;text&quot;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">usetex</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">True</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">plt.rc(</span><span style="color:#032F62;">&quot;font&quot;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">family</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;serif&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">plt.rc(</span><span style="color:#032F62;">&quot;font&quot;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">**</span><span style="color:#24292E;">{</span><span style="color:#032F62;">&quot;sans-serif&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;Consolas&quot;</span><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">plt.rcParams.update({</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;text.usetex&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">True</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;text.latex.preamble&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;</span><span style="color:#005CC5;">\\</span><span style="color:#032F62;">usepackage{...}&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;font.family&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;serif&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span></code></pre></div><p>一些默认值</p> <div class="language-plaintextc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#24292E;">figure.figsize : 6.4, 4.8  </span><span style="color:#6A737D;">## figure size in inches</span></span>
<span class="line"><span style="color:#24292E;">font.size      : 10        </span><span style="color:#6A737D;">## default 'medium' size (all relative values: xx-small, x-small,</span></span>
<span class="line"><span style="color:#24292E;">                           </span><span style="color:#6A737D;">## small, medium, large, x-large, xx-large, larger, or smaller)</span></span>
<span class="line"></span></code></pre></div><h2 id="刻度-ticks"><a href="#刻度-ticks" class="header-anchor">#</a> 刻度 (Ticks)</h2> <p>可以选择合适的 <a href="https://matplotlib.org/stable/gallery/ticks/tick-locators.html" target="_blank" rel="noopener noreferrer">tick locator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 决定刻度的位置，再使用 <a href="https://matplotlib.org/stable/gallery/ticks/tick-formatters.html" target="_blank" rel="noopener noreferrer">tick formatter<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来决定对应的文本</p> <h3 id="主副刻度-major-and-minor-ticks"><a href="#主副刻度-major-and-minor-ticks" class="header-anchor">#</a> 主、副刻度 (Major and minor ticks)</h3> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> matplotlib.ticker </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> MultipleLocator</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">ax.xaxis.set_major_locator(MultipleLocator(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">))</span></span>
<span class="line"><span style="color:#24292E;">ax.xaxis.set_minor_locator(MultipleLocator(</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">))</span></span>
<span class="line"><span style="color:#6A737D;">## 使用下面一行来显示副刻度的标签 (minor tick labels)</span></span>
<span class="line"><span style="color:#6A737D;"># ax.xaxis.set_minor_formatter(FormatStrFormatter('%d'))</span></span>
<span class="line"></span></code></pre></div><p>如果只想画给定的若干刻度，可以使用</p> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> matplotlib.ticker </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> FixedFormatter, FixedLocator</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">ax.yaxis.set_minor_locator(FixedLocator([</span><span style="color:#005CC5;">5.69</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">7.76</span><span style="color:#24292E;">]))</span></span>
<span class="line"><span style="color:#24292E;">ax.yaxis.set_minor_formatter(FixedFormatter([</span><span style="color:#032F62;">&quot;5.69&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;7.76&quot;</span><span style="color:#24292E;">]))</span></span>
<span class="line"><span style="color:#6A737D;">## major ticks 同理</span></span>
<span class="line"></span></code></pre></div><h3 id="刻度样式"><a href="#刻度样式" class="header-anchor">#</a> 刻度样式</h3> <p>使用 <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.tick_params.html" target="_blank" rel="noopener noreferrer"><code>ax.tick_params</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来控制刻度的方向，颜色，大小等等（<code>ax</code> 为 <code>matplotlib.axes.Axes</code> 对象），比如</p> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## 将刻度画在图内部</span></span>
<span class="line"><span style="color:#24292E;">ax.tick_params(</span><span style="color:#E36209;">direction</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;in&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6A737D;">## 也可以只应用到某些部分，例如只缩小 y 轴、副刻度的字体大小</span></span>
<span class="line"><span style="color:#24292E;">ax.tick_params(</span><span style="color:#E36209;">axis</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;y&quot;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">which</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;minor&quot;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">labelsize</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">6</span><span style="color:#24292E;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="让-x-y-轴等刻度"><a href="#让-x-y-轴等刻度" class="header-anchor">#</a> 让 x, y 轴等刻度</h3> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;"># plt.axis(&quot;equal&quot;)</span></span>
<span class="line"><span style="color:#6A737D;">## 一般来说上面的用法就够了，但是如果同时对 xlim, ylim 有要求的话，下方的用法更准确</span></span>
<span class="line"><span style="color:#24292E;">ax </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> plt.gca()</span></span>
<span class="line"><span style="color:#24292E;">ax.set_aspect(</span><span style="color:#032F62;">&quot;equal&quot;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">adjustable</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;box&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span></code></pre></div><h2 id="colormap"><a href="#colormap" class="header-anchor">#</a> Colormap</h2> <h3 id="colormap-与-mappable"><a href="#colormap-与-mappable" class="header-anchor">#</a> Colormap 与 Mappable</h3> <ul><li><code>Colormap</code> 用来把 [0, 1] 数值转化成 RGBA 颜色值
<ul><li>比如可以直接使用 <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.colors.Colormap.html#matplotlib.colors.Colormap.__call__" target="_blank" rel="noopener noreferrer"><code>matplotlib.colors.Colormap.coolwarm(X)</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 进行转换</li></ul></li> <li><code>Mappable</code> 则可以对 <code>Colormap</code> 进行放缩（借助 <code>Normalize</code>）
<ul><li>然后使用 <a href="https://matplotlib.org/stable/api/cm_api.html#matplotlib.cm.ScalarMappable.to_rgba" target="_blank" rel="noopener noreferrer"><code>mappable.to_rgba(X)</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 进行转换</li></ul></li></ul> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> matplotlib.cm </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> ScalarMappable</span></span>
<span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> matplotlib.colors </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> Normalize</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## The default colormap assumes range [0, 1]. `ScalarMappable` allows custom range.</span></span>
<span class="line"><span style="color:#24292E;">mappable </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ScalarMappable(Normalize(</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">), </span><span style="color:#032F62;">&quot;bwr&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6A737D;">## Don't know why but `set_array` may be needed</span></span>
<span class="line"><span style="color:#6A737D;">## https://stackoverflow.com/a/49036899/8682688</span></span>
<span class="line"><span style="color:#6A737D;"># mappable.set_array(np.array([...]))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">certain_patch.set_color(mappable.to_rgba(value))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">plt.colorbar(mappable)</span></span>
<span class="line"></span></code></pre></div><h3 id="使-colorbar-刻度为整数"><a href="#使-colorbar-刻度为整数" class="header-anchor">#</a> 使 Colorbar 刻度为整数</h3> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> matplotlib.ticker </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> MaxNLocator</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">bar </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> fig.colorbar()</span></span>
<span class="line"><span style="color:#24292E;">bar.locator </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> MaxNLocator(</span><span style="color:#E36209;">integer</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">True</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">bar.update_ticks()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## 如果是坐标轴的话</span></span>
<span class="line"><span style="color:#6A737D;"># plt.gca().yaxis.set_major_locator(MaxNLocator(integer=True))</span></span>
<span class="line"></span></code></pre></div><h3 id="使-colorbar-和作图区域等高"><a href="#使-colorbar-和作图区域等高" class="header-anchor">#</a> 使 Colorbar 和作图区域等高</h3> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#24292E;">im </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> plt.imshow()  </span><span style="color:#6A737D;">## ...</span></span>
<span class="line"><span style="color:#24292E;">plt.colorbar(im, </span><span style="color:#E36209;">fraction</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">0.046</span><span style="color:#24292E;">, </span><span style="color:#E36209;">pad</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">0.4</span><span style="color:#24292E;">)</span></span>
<span class="line"></span></code></pre></div><p>不知道原理但是很神奇（<a href="https://stackoverflow.com/a/26720422" target="_blank" rel="noopener noreferrer">更多讨论<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</p> <h2 id="subplots"><a href="#subplots" class="header-anchor">#</a> Subplots</h2> <p><a href="https://matplotlib.org/3.1.1/gallery/subplots_axes_and_figures/subplots_demo.html" target="_blank" rel="noopener noreferrer">Matplotlib demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <figure><img src="/notes/assets/img/sharedxylabel.07a5d8e3.png" alt="" class="border"> <figcaption><a href="https://stackoverflow.com/a/53172335/8682688" target="_blank" rel="noopener noreferrer" class="outbound">Shared xlabel/ylabel</a></figcaption></figure> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> matplotlib.pyplot </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> plt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">fig, axes </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> plt.subplots(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, </span><span style="color:#E36209;">sharex</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">True</span><span style="color:#24292E;">, </span><span style="color:#E36209;">sharey</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">True</span><span style="color:#24292E;">)  </span><span style="color:#6A737D;">## figsize=(6.4, 4.8)</span></span>
<span class="line"><span style="color:#6A737D;">## add a big axis, hide frame</span></span>
<span class="line"><span style="color:#24292E;">fig.add_subplot(</span><span style="color:#005CC5;">111</span><span style="color:#24292E;">, </span><span style="color:#E36209;">frameon</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">False</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6A737D;">## hide tick and tick label of the big axis</span></span>
<span class="line"><span style="color:#24292E;">plt.tick_params(</span><span style="color:#E36209;">labelcolor</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;none&quot;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">which</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;both&quot;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">top</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">False</span><span style="color:#24292E;">, </span><span style="color:#E36209;">bottom</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">False</span><span style="color:#24292E;">, </span><span style="color:#E36209;">left</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">False</span><span style="color:#24292E;">, </span><span style="color:#E36209;">right</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">False</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## 保存为 pgf 格式时 labelcolor 不生效，需要额外添加下面两行</span></span>
<span class="line"><span style="color:#6A737D;"># plt.xticks([0], [&quot; &quot;])</span></span>
<span class="line"><span style="color:#6A737D;"># plt.yticks([0], [&quot; &quot;], rotation=&quot;vertical&quot;, fontsize=&quot;xx-large&quot;)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">plt.xlabel(</span><span style="color:#032F62;">&quot;common X&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">plt.ylabel(</span><span style="color:#032F62;">&quot;common Y&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span></code></pre></div><h2 id="default-color-cycle"><a href="#default-color-cycle" class="header-anchor">#</a> Default Color Cycle</h2> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#24292E;">prop_cycle </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> plt.rcParams[</span><span style="color:#032F62;">&quot;axes.prop_cycle&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">colors </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> prop_cycle.by_key()[</span><span style="color:#032F62;">&quot;color&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"></span></code></pre></div><p><span id="copy-msg">Click to copy</span><br> <button onclick="navigator.clipboard.writeText(this.innerHTML); document.getElementById('copy-msg').innerHTML = 'Copied!'; setTimeout(() =&gt; { document.getElementById('copy-msg').innerHTML = 'Click to copy' }, 1000)" class="color-label" style="background:#1f77b4;">#1f77b4</button> <button onclick="navigator.clipboard.writeText(this.innerHTML); document.getElementById('copy-msg').innerHTML = 'Copied!'; setTimeout(() =&gt; { document.getElementById('copy-msg').innerHTML = 'Click to copy' }, 1000)" class="color-label" style="background:#ff7f0e;">#ff7f0e</button> <button onclick="navigator.clipboard.writeText(this.innerHTML); document.getElementById('copy-msg').innerHTML = 'Copied!'; setTimeout(() =&gt; { document.getElementById('copy-msg').innerHTML = 'Click to copy' }, 1000)" class="color-label" style="background:#2ca02c;">#2ca02c</button> <button onclick="navigator.clipboard.writeText(this.innerHTML); document.getElementById('copy-msg').innerHTML = 'Copied!'; setTimeout(() =&gt; { document.getElementById('copy-msg').innerHTML = 'Click to copy' }, 1000)" class="color-label" style="background:#d62728;">#d62728</button> <button onclick="navigator.clipboard.writeText(this.innerHTML); document.getElementById('copy-msg').innerHTML = 'Copied!'; setTimeout(() =&gt; { document.getElementById('copy-msg').innerHTML = 'Click to copy' }, 1000)" class="color-label" style="background:#9467bd;">#9467bd</button></p> <h2 id="动画"><a href="#动画" class="header-anchor">#</a> 动画</h2> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> matplotlib.animation </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> animation</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">fig, ax </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> plt.plt.subplots()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ani_func</span><span style="color:#24292E;">(i):</span></span>
<span class="line"><span style="color:#24292E;">    line.set_xdata([i, i])</span></span>
<span class="line"><span style="color:#24292E;">    line.set(</span><span style="color:#E36209;">alpha</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">n_frames </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span></span>
<span class="line"><span style="color:#24292E;">fps </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">25</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">line </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ax.axvline(</span><span style="color:#E36209;">x</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#E36209;">ymin</span><span style="color:#D73A49;">=-</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#E36209;">ymax</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">11</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">line_ani </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> animation.FuncAnimation(fig, ani_func, </span><span style="color:#E36209;">frames</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">n_frames)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">writer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> animation.FFMpegWriter(</span><span style="color:#E36209;">fps</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">fps)</span></span>
<span class="line"><span style="color:#24292E;">line_ani.save(</span><span style="color:#032F62;">&quot;animation.mp4&quot;</span><span style="color:#24292E;">, </span><span style="color:#E36209;">writer</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">writer)</span></span>
<span class="line"></span></code></pre></div><h2 id="pgf-格式与-latex"><a href="#pgf-格式与-latex" class="header-anchor">#</a> PGF 格式与 LaTeX</h2> <p>Matplotlib 可以导出 pgf 格式的图片，其本质是一系列 tex 命令。使用 pgf 格式可以让图片中的文本使用当前 LaTeX 文档所用的字体，从而保持一致。</p> <div class="language-python extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#24292E;">plt.savefig(</span><span style="color:#032F62;">&quot;example.pgf&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span></code></pre></div><p>在此之前可以使用 <code>fig.set_size_inches(w=4, h=3)</code> 来调整图像画布大小</p> <div class="language-latex extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#D73A49;">\usepackage</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">pgf</span><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;">\begin</span><span style="color:#24292E;">{document}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;">\begin</span><span style="color:#24292E;">{figure}</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">\centering</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">\input</span><span style="color:#24292E;">{example.pgf}</span></span>
<span class="line"><span style="color:#005CC5;">\end</span><span style="color:#24292E;">{figure}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;">\end</span><span style="color:#24292E;">{document}</span></span>
<span class="line"></span></code></pre></div><p>可以使用 <code>\resizebox{0.6\textwidth}{!}{\input{example.pgf}}</code> 来整体缩放图像</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last updated:</span> <span class="time">10/12/2023, 4:01:18 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/programming/python/miniconda.html" class="prev">
        Miniconda
      </a></span> <span class="next"><a href="/notes/programming/python/python.html">
        Python
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/notes/assets/js/app.943eb73b.js" defer></script><script src="/notes/assets/js/3.8465ba19.js" defer></script><script src="/notes/assets/js/12.c3e4fc46.js" defer></script>
  </body>
</html>
