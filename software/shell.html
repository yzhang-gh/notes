<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Shell | Notes</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Notes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/notes/assets/css/0.styles.60ecb326.css" as="style"><link rel="preload" href="/notes/assets/js/app.943eb73b.js" as="script"><link rel="preload" href="/notes/assets/js/3.8465ba19.js" as="script"><link rel="preload" href="/notes/assets/js/103.11ba2dc4.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.74f6aed7.js"><link rel="prefetch" href="/notes/assets/js/100.034a3b93.js"><link rel="prefetch" href="/notes/assets/js/101.7a58913c.js"><link rel="prefetch" href="/notes/assets/js/102.09374552.js"><link rel="prefetch" href="/notes/assets/js/104.60a5964b.js"><link rel="prefetch" href="/notes/assets/js/105.86967dd8.js"><link rel="prefetch" href="/notes/assets/js/106.6862691f.js"><link rel="prefetch" href="/notes/assets/js/11.a46c7ced.js"><link rel="prefetch" href="/notes/assets/js/12.c3e4fc46.js"><link rel="prefetch" href="/notes/assets/js/13.674a5639.js"><link rel="prefetch" href="/notes/assets/js/14.fbcf5a64.js"><link rel="prefetch" href="/notes/assets/js/15.5cffcf67.js"><link rel="prefetch" href="/notes/assets/js/16.338f7843.js"><link rel="prefetch" href="/notes/assets/js/17.99d0dc21.js"><link rel="prefetch" href="/notes/assets/js/18.7a01ab35.js"><link rel="prefetch" href="/notes/assets/js/19.2feeedce.js"><link rel="prefetch" href="/notes/assets/js/2.71c806c6.js"><link rel="prefetch" href="/notes/assets/js/20.d918ee7b.js"><link rel="prefetch" href="/notes/assets/js/21.e5104b76.js"><link rel="prefetch" href="/notes/assets/js/22.2d4b2f2a.js"><link rel="prefetch" href="/notes/assets/js/23.185dc70a.js"><link rel="prefetch" href="/notes/assets/js/24.2d25e73e.js"><link rel="prefetch" href="/notes/assets/js/25.e7452036.js"><link rel="prefetch" href="/notes/assets/js/26.bea8aa87.js"><link rel="prefetch" href="/notes/assets/js/27.4f3903f2.js"><link rel="prefetch" href="/notes/assets/js/28.902dbaee.js"><link rel="prefetch" href="/notes/assets/js/29.3deb033b.js"><link rel="prefetch" href="/notes/assets/js/30.d8646ab5.js"><link rel="prefetch" href="/notes/assets/js/31.fec58167.js"><link rel="prefetch" href="/notes/assets/js/32.7dc85083.js"><link rel="prefetch" href="/notes/assets/js/33.c8ed5fae.js"><link rel="prefetch" href="/notes/assets/js/34.6e5ee31a.js"><link rel="prefetch" href="/notes/assets/js/35.ccec245a.js"><link rel="prefetch" href="/notes/assets/js/36.4789f477.js"><link rel="prefetch" href="/notes/assets/js/37.fcd1b611.js"><link rel="prefetch" href="/notes/assets/js/38.e50f556c.js"><link rel="prefetch" href="/notes/assets/js/39.c9da1f8c.js"><link rel="prefetch" href="/notes/assets/js/4.c2282a97.js"><link rel="prefetch" href="/notes/assets/js/40.ecd0969b.js"><link rel="prefetch" href="/notes/assets/js/41.d895d699.js"><link rel="prefetch" href="/notes/assets/js/42.a8f85480.js"><link rel="prefetch" href="/notes/assets/js/43.b0195426.js"><link rel="prefetch" href="/notes/assets/js/44.9bafeff7.js"><link rel="prefetch" href="/notes/assets/js/45.fc069068.js"><link rel="prefetch" href="/notes/assets/js/46.15dac1e7.js"><link rel="prefetch" href="/notes/assets/js/47.3b8c13e7.js"><link rel="prefetch" href="/notes/assets/js/48.9149ea6f.js"><link rel="prefetch" href="/notes/assets/js/49.22096f41.js"><link rel="prefetch" href="/notes/assets/js/5.0a40a8cc.js"><link rel="prefetch" href="/notes/assets/js/50.2ce15617.js"><link rel="prefetch" href="/notes/assets/js/51.ff2268fc.js"><link rel="prefetch" href="/notes/assets/js/52.c0beff8b.js"><link rel="prefetch" href="/notes/assets/js/53.5d9024f6.js"><link rel="prefetch" href="/notes/assets/js/54.a603a0a1.js"><link rel="prefetch" href="/notes/assets/js/55.73ed4382.js"><link rel="prefetch" href="/notes/assets/js/56.3d2bcd4a.js"><link rel="prefetch" href="/notes/assets/js/57.167a12d5.js"><link rel="prefetch" href="/notes/assets/js/58.93bcace4.js"><link rel="prefetch" href="/notes/assets/js/59.0820fe49.js"><link rel="prefetch" href="/notes/assets/js/6.773bcde9.js"><link rel="prefetch" href="/notes/assets/js/60.a5f5280b.js"><link rel="prefetch" href="/notes/assets/js/61.3b526050.js"><link rel="prefetch" href="/notes/assets/js/62.005a7608.js"><link rel="prefetch" href="/notes/assets/js/63.86548806.js"><link rel="prefetch" href="/notes/assets/js/64.7b4e206a.js"><link rel="prefetch" href="/notes/assets/js/65.9e44cd94.js"><link rel="prefetch" href="/notes/assets/js/66.21e77cb2.js"><link rel="prefetch" href="/notes/assets/js/67.e88c090f.js"><link rel="prefetch" href="/notes/assets/js/68.8b474706.js"><link rel="prefetch" href="/notes/assets/js/69.eebbdf3f.js"><link rel="prefetch" href="/notes/assets/js/7.76782ec6.js"><link rel="prefetch" href="/notes/assets/js/70.de49f577.js"><link rel="prefetch" href="/notes/assets/js/71.db75ed0c.js"><link rel="prefetch" href="/notes/assets/js/72.b1aeee29.js"><link rel="prefetch" href="/notes/assets/js/73.8e2a2dc8.js"><link rel="prefetch" href="/notes/assets/js/74.a7643b30.js"><link rel="prefetch" href="/notes/assets/js/75.411c51c2.js"><link rel="prefetch" href="/notes/assets/js/76.9cb71875.js"><link rel="prefetch" href="/notes/assets/js/77.0abca309.js"><link rel="prefetch" href="/notes/assets/js/78.09f80d14.js"><link rel="prefetch" href="/notes/assets/js/79.b618d8d6.js"><link rel="prefetch" href="/notes/assets/js/8.eff1670d.js"><link rel="prefetch" href="/notes/assets/js/80.3f304dd0.js"><link rel="prefetch" href="/notes/assets/js/81.5e1d22e3.js"><link rel="prefetch" href="/notes/assets/js/82.ebcf132b.js"><link rel="prefetch" href="/notes/assets/js/83.6c998c48.js"><link rel="prefetch" href="/notes/assets/js/84.1bb8ff9f.js"><link rel="prefetch" href="/notes/assets/js/85.915463e8.js"><link rel="prefetch" href="/notes/assets/js/86.54830d70.js"><link rel="prefetch" href="/notes/assets/js/87.4e330a2c.js"><link rel="prefetch" href="/notes/assets/js/88.859b8d56.js"><link rel="prefetch" href="/notes/assets/js/89.31aa01fb.js"><link rel="prefetch" href="/notes/assets/js/9.7bbf0480.js"><link rel="prefetch" href="/notes/assets/js/90.9382184f.js"><link rel="prefetch" href="/notes/assets/js/91.8bb2e809.js"><link rel="prefetch" href="/notes/assets/js/92.44badc72.js"><link rel="prefetch" href="/notes/assets/js/93.091e597a.js"><link rel="prefetch" href="/notes/assets/js/94.eb6ff046.js"><link rel="prefetch" href="/notes/assets/js/95.bccd7cb6.js"><link rel="prefetch" href="/notes/assets/js/96.b8e239ca.js"><link rel="prefetch" href="/notes/assets/js/97.f5f281d8.js"><link rel="prefetch" href="/notes/assets/js/98.90797ed2.js"><link rel="prefetch" href="/notes/assets/js/99.98568f98.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.60ecb326.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><!----> <span class="site-name">Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ML and Math" class="dropdown-title"><span class="title">ML and Math</span> <span class="arrow down"></span></button> <button type="button" aria-label="ML and Math" class="mobile-dropdown-title"><span class="title">ML and Math</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/ml/" class="nav-link">
  Machine Learning
</a></li><li class="dropdown-item"><!----> <a href="/notes/math/" class="nav-link">
  Math
</a></li></ul></div></div><div class="nav-item"><a href="/notes/software/" class="nav-link router-link-active">
  Software and Tools
</a></div><div class="nav-item"><a href="/notes/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/notes/langs/" class="nav-link">
  Languages
</a></div><div class="nav-item"><a href="/notes/reading/" class="nav-link">
  Reading
</a></div><div class="nav-item"><a href="/notes/others/" class="nav-link">
  Others
</a></div> <a href="https://github.com/yzhang-gh/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ML and Math" class="dropdown-title"><span class="title">ML and Math</span> <span class="arrow down"></span></button> <button type="button" aria-label="ML and Math" class="mobile-dropdown-title"><span class="title">ML and Math</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/ml/" class="nav-link">
  Machine Learning
</a></li><li class="dropdown-item"><!----> <a href="/notes/math/" class="nav-link">
  Math
</a></li></ul></div></div><div class="nav-item"><a href="/notes/software/" class="nav-link router-link-active">
  Software and Tools
</a></div><div class="nav-item"><a href="/notes/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/notes/langs/" class="nav-link">
  Languages
</a></div><div class="nav-item"><a href="/notes/reading/" class="nav-link">
  Reading
</a></div><div class="nav-item"><a href="/notes/others/" class="nav-link">
  Others
</a></div> <a href="https://github.com/yzhang-gh/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Windows</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/software/windows/autohotkey.html" class="sidebar-link">AutoHotkey</a></li><li><a href="/notes/software/windows/context-menu.html" class="sidebar-link">自定义右键菜单</a></li><li><a href="/notes/software/windows/general.html" class="sidebar-link">一般问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>General</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/software/vim.html" class="sidebar-link">Vim</a></li><li><a href="/notes/software/shell.html" aria-current="page" class="active sidebar-link">Shell</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/software/shell.html#zsh-and-oh-my-zsh" class="sidebar-link">Zsh and Oh My Zsh</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#ssh" class="sidebar-link">SSH</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#传文件-scp" class="sidebar-link">传文件 scp</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#rsync" class="sidebar-link">rsync</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#ls" class="sidebar-link">ls</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#文件权限-chmod" class="sidebar-link">文件权限 chmod</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#wget" class="sidebar-link">wget</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#任务管理-nohup-ps-kill-jobs-fg-bg-disown" class="sidebar-link">任务管理 nohup, ps, kill, jobs, fg, bg, disown</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#别名-alias-type" class="sidebar-link">别名 alias, type</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#tee" class="sidebar-link">tee</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#find" class="sidebar-link">find</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#文件压缩解压-zip-tar" class="sidebar-link">文件压缩、解压 zip, tar</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#文件大小与硬盘占用-du-df" class="sidebar-link">文件大小与硬盘占用 du, df</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#command-history" class="sidebar-link">Command history</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#使用变量" class="sidebar-link">使用变量</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#split" class="sidebar-link">split</a></li><li class="sidebar-sub-header"><a href="/notes/software/shell.html#服务器管理常用命令" class="sidebar-link">服务器管理常用命令</a></li></ul></li><li><a href="/notes/software/powershell.html" class="sidebar-link">PowerShell</a></li><li><a href="/notes/software/docker.html" class="sidebar-link">Docker</a></li><li><a href="/notes/software/ffmpeg.html" class="sidebar-link">FFmpeg</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="shell"><a href="#shell" class="header-anchor">#</a> Shell</h1> <h2 id="zsh-and-oh-my-zsh"><a href="#zsh-and-oh-my-zsh" class="header-anchor">#</a> Zsh and Oh My Zsh</h2> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## Zsh</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zsh</span></span>
<span class="line"><span style="color:#6F42C1;">chsh</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">$(</span><span style="color:#005CC5;">which</span><span style="color:#032F62;"> zsh)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## Log out and log back in again</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## Oh My Zsh</span></span>
<span class="line"><span style="color:#6A737D;"># https://github.com/ohmyzsh/ohmyzsh#basic-installation</span></span>
<span class="line"></span></code></pre></div><p>插件 <a href="https://github.com/zsh-users/zsh-syntax-highlighting" target="_blank" rel="noopener noreferrer">zsh-syntax-highlighting<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://github.com/zsh-users/zsh-autosuggestions" target="_blank" rel="noopener noreferrer">zsh-autosuggestions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>超实用命令</strong></p> <ul><li><code>d</code> 列出最近访问的路径，再次输入数字回车跳转到对应目录</li> <li><a href="https://unix.stackexchange.com/a/74208/415169" target="_blank" rel="noopener noreferrer">push-line<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (<kbd>Alt</kbd>+<kbd>q</kbd>)</li></ul> <h3 id="迁移-ohmyzsh-配置"><a href="#迁移-ohmyzsh-配置" class="header-anchor">#</a> 迁移 (ohmy)zsh 配置</h3> <p>将 home 下的 <code>.zshrc</code> 文件，<code>.oh-my-zsh</code> 目录（一般插件也安装在其子目录下）复制即可，其它还有我个人使用的主题文件 <code>.p10k.zsh</code></p> <h2 id="ssh"><a href="#ssh" class="header-anchor">#</a> SSH</h2> <h3 id="生成并配置密钥"><a href="#生成并配置密钥" class="header-anchor">#</a> 生成并配置密钥</h3> <p><a href="https://www.ssh.com/ssh/keygen/" target="_blank" rel="noopener noreferrer">https://www.ssh.com/ssh/keygen/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-shell extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;"># cd ~/.ssh</span></span>
<span class="line"><span style="color:#6F42C1;">ssh-keygen</span><span style="color:#24292E;">                           </span><span style="color:#6A737D;">## 生成公、私钥，默认分别为 id_rsa.pub 和 id_rsa</span></span>
<span class="line"><span style="color:#6F42C1;">ssh-copy-id</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">id_rsa.pub</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user@host</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">## 将公钥复制到服务器</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">ssh</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user@host</span><span style="color:#24292E;">                     </span><span style="color:#6A737D;">## 输出调试信息 (verbose)</span></span>
<span class="line"></span></code></pre></div><h3 id="配置文件"><a href="#配置文件" class="header-anchor">#</a> 配置文件</h3> <ul><li>全局 <code>/etc/ssh/ssh_config</code></li> <li>用户 <code>~/.ssh/config</code></li></ul> <p>比如设置首选公钥验证方式</p> <div class="language-ssh-config extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## Host &lt;pattern ...&gt;</span></span>
<span class="line"><span style="color:#D73A49;">Host</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">*.ac.uk</span></span>
<span class="line"><span style="color:#6A737D;">#   HostName &lt;the real hostname (or IP) to login to&gt;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">PreferredAuthentications</span><span style="color:#24292E;"> publickey,keyboard-interactive,password,hostbased</span></span>
<span class="line"><span style="color:#6A737D;">#   IdentityFile ~/.ssh/another_id_rsa</span></span>
<span class="line"><span style="color:#6A737D;">#   Port 2333</span></span>
<span class="line"></span></code></pre></div><p>其中 <code>pattern</code> 用来匹配 <code>ssh</code> 命令中的 <code>host</code> 名称，同时设置多个 <code>pattern</code> 时用空格隔开</p> <p>对于每个配置，其取值为最先匹配到的值，所以 <code>Host *</code> 这种规则应该放在最后，相当于 fallback</p> <p>More on <a href="https://linux.die.net/man/5/ssh_config" target="_blank" rel="noopener noreferrer">https://linux.die.net/man/5/ssh_config<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="传文件-scp"><a href="#传文件-scp" class="header-anchor">#</a> 传文件 <code>scp</code></h2> <h3 id="between-remote-and-local"><a href="#between-remote-and-local" class="header-anchor">#</a> Between remote and local</h3> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## scp [-P port] [[&lt;user&gt;@]&lt;host&gt;:]&lt;source_file ...&gt; [[&lt;user&gt;@]&lt;host&gt;:]&lt;target&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## from local to remote</span></span>
<span class="line"><span style="color:#6F42C1;">scp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">foo.txt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bar.txt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user@host:~</span></span>
<span class="line"><span style="color:#6F42C1;">scp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{foo,bar}.txt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user@host:~</span></span>
<span class="line"><span style="color:#6F42C1;">scp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#032F62;">.txt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user@host:~</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## from remote to local</span></span>
<span class="line"><span style="color:#6F42C1;">scp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user@host:/remote/folder/</span><span style="color:#005CC5;">\{</span><span style="color:#032F62;">foo,bar</span><span style="color:#005CC5;">\}</span><span style="color:#032F62;">.txt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">local/folder/</span></span>
<span class="line"></span></code></pre></div><p>Glob patterns can be used (e.g. <code>*.{py,json}</code> matches all Python and JSON files).</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Using <code>\{foo,bar\}.txt</code> will transfer the files in a single connection/batch (since they'll be expanded on the remote host), while using <code>{foo,bar}.txt</code> will open multiple connections, and the overhead is quite noticeable when transferring many files.</p> <div class="language-plaintextc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;"># check with `-o LogLevel=DEBUG`</span></span>
<span class="line"><span style="color:#6A737D;"># \{foo,bar\}</span></span>
<span class="line"><span style="color:#24292E;">debug1: Sending command: scp -d -f /remote/folder/{foo,bar}.txt</span></span>
<span class="line"><span style="color:#24292E;">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># {foo,bar}</span></span>
<span class="line"><span style="color:#24292E;">debug1: Sending command: scp -d -f /remote/folder/foo.txt</span></span>
<span class="line"><span style="color:#24292E;">...</span></span>
<span class="line"><span style="color:#24292E;">debug1: Sending command: scp -d -f /remote/folder/bar.txt</span></span>
<span class="line"><span style="color:#24292E;">...</span></span>
<span class="line"></span></code></pre></div><p>此外使用引号 <code>'/remote/folder/{foo,bar}.txt'</code> 也可以达到和 <code>\{foo,bar\}.txt</code> 同样的效果</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>远程设备上的文件路径也可以使用 <kbd>Tab</kbd> 补全，只需配置好身份验证（比如公钥验证）。如前文所提示，记得使用 <code>\</code> 转义花括号，否则路径补全可能无法正常工作。</p></div> <h3 id="between-remote-hosts"><a href="#between-remote-hosts" class="header-anchor">#</a> Between remote hosts</h3> <div class="language-shell extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br></div><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## host1 → host2</span></span>
<span class="line"><span style="color:#6F42C1;">scp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user1@host1:~/foo.txt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user2@host2:~/somewhere</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## host1 → local → host2</span></span>
<span class="line"><span style="color:#6F42C1;">scp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-3</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user1@host1:~/foo.txt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user2@host2:~/somewhere</span></span>
<span class="line"></span></code></pre></div><p>With <code>-3</code> the file is transferred through the local host, otherwise it would first <code>ssh</code> to <code>host1</code> and then run <code>scp</code> from <code>host1</code> to <code>host2</code>, which requires you to set up the authorization credentials for <code>host2</code> on <code>host1</code>.</p> <p><a href="https://superuser.com/a/686527/950027" target="_blank" rel="noopener noreferrer">https://superuser.com/a/686527/950027<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="copy-a-folder--r"><a href="#copy-a-folder--r" class="header-anchor">#</a> Copy a folder (<code>-r</code>)</h3> <div class="language-shell extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">scp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-r</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user@your.server.example.com:/path/to/foo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/user/Desktop/</span></span>
<span class="line"></span></code></pre></div><p><strong>NOTE</strong>: By <strong>not</strong> including the trailing <code>/</code> at the end of <code>foo</code>, you will move the directory itself (including contents), rather than only the contents of the directory.</p> <p><code>user@your.server.example.com:/path/to/foo</code> 一般很长，可以考虑在 <code>.bashrc</code> 中<a href="#%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F">定义一个变量</a></p> <h2 id="rsync"><a href="#rsync" class="header-anchor">#</a> <code>rsync</code></h2> <p><a href="https://download.samba.org/pub/rsync/rsync.1" target="_blank" rel="noopener noreferrer">official docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## rsync [OPTION...] SRC... [DEST]</span></span>
<span class="line"><span style="color:#6F42C1;">rsync</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ah</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dir1/</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dir2</span></span>
<span class="line"><span style="color:#6A737D;"># -a    ## --archive, syncs recursively, preserves symbolic links, permissions etc.</span></span>
<span class="line"><span style="color:#6A737D;"># -h    ## --human-readable</span></span>
<span class="line"><span style="color:#6A737D;"># -z    ## --compress</span></span>
<span class="line"><span style="color:#6A737D;"># -v    ## --verbose</span></span>
<span class="line"><span style="color:#6A737D;"># -n    ## --dry-run</span></span>
<span class="line"><span style="color:#6A737D;"># -L    ## --copy-links</span></span>
<span class="line"><span style="color:#6A737D;"># --info=progress2   ## progress1, per-file progress; progress2, total transfer progress</span></span>
<span class="line"><span style="color:#6A737D;"># --exclude=PATTERN  ## e.g. &quot;*.json&quot;</span></span>
<span class="line"><span style="color:#6A737D;"># --include=PATTERN</span></span>
<span class="line"></span></code></pre></div><p>注意 <code>/</code>（<code>dir2</code> 会被自动创建，如果中间的路径都存在的话）</p> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">rsync</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ah</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dir1/</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dir2</span></span>
<span class="line"><span style="color:#6A737D;">## dir1/* → dir2/*</span></span>
<span class="line"><span style="color:#6F42C1;">rsync</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ah</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dir1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dir2</span></span>
<span class="line"><span style="color:#6A737D;">## dir1/* → dir2/dir1/*</span></span>
<span class="line"></span></code></pre></div><p>文件量很多的时候，建议先使用 <code>-n</code> 选项检查会被传输的文件列表</p> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">rsync</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-anv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dir1/</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dir2</span></span>
<span class="line"></span></code></pre></div><p>通过 SSH 传输</p> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">rsync</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ah</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--info=progress2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-e</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'ssh -p 2333'</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user@host:/foo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.</span></span>
<span class="line"><span style="color:#6A737D;">## more example, `-e 'ssh -i mykey -p 2333'`</span></span>
<span class="line"></span></code></pre></div><h2 id="ls"><a href="#ls" class="header-anchor">#</a> <code>ls</code></h2> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## ls [OPTION...] [FILE or DIR...]</span></span>
<span class="line"><span style="color:#6F42C1;">ls</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-a</span><span style="color:#24292E;">             </span><span style="color:#6A737D;">## include entries starting with `.`</span></span>
<span class="line"><span style="color:#6F42C1;">ls</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-l</span><span style="color:#24292E;">             </span><span style="color:#6A737D;">## detailed information</span></span>
<span class="line"><span style="color:#6F42C1;">ls</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">head</span><span style="color:#24292E;"> [-</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">n</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">]  </span><span style="color:#6A737D;">## only show first n entries (default 10)</span></span>
<span class="line"><span style="color:#6F42C1;">ls</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tail</span><span style="color:#24292E;">         </span><span style="color:#6A737D;">## ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## 有些 `.bashrc` 中默认定义了一些 aliases</span></span>
<span class="line"><span style="color:#D73A49;">alias</span><span style="color:#24292E;"> ll</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">'ls -alF'</span></span>
<span class="line"><span style="color:#D73A49;">alias</span><span style="color:#24292E;"> la</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">'ls -A'</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">## except for `.` and `..`</span></span>
<span class="line"><span style="color:#D73A49;">alias</span><span style="color:#24292E;"> l</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">'ls -CF'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## 统计文件数量 (wc, word count)</span></span>
<span class="line"><span style="color:#6F42C1;">ls</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">wc</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-l</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">## --lines</span></span>
<span class="line"></span></code></pre></div><h2 id="文件权限-chmod"><a href="#文件权限-chmod" class="header-anchor">#</a> 文件权限 <code>chmod</code></h2> <p>Permissions</p> <ul><li><code>r</code> read</li> <li><code>w</code> write</li> <li><code>x</code> execute (if it is a file)</li></ul> <div class="language-shellsession extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#005CC5;font-weight:bold;">$</span><span style="color:#24292E;"> ls -l</span></span>
<span class="line"><span style="color:#6A737D;">-rwxr-xr--  1 dgerman  staff  823 Dec 16 15:03 sample_file</span></span>
<span class="line"><span style="color:#6A737D;">││  │  │      │        │      │                └ file/dir name</span></span>
<span class="line"><span style="color:#6A737D;">││  │  │      │        │      └ file size in bytes</span></span>
<span class="line"><span style="color:#6A737D;">││  │  │      │        └ group owner</span></span>
<span class="line"><span style="color:#6A737D;">││  │  │      └ user owner</span></span>
<span class="line"><span style="color:#6A737D;">││  │  └ other permissions (users who are neither the file owner nor in the group)</span></span>
<span class="line"><span style="color:#6A737D;">││  └ group permissions</span></span>
<span class="line"><span style="color:#6A737D;">│└ user permissions</span></span>
<span class="line"><span style="color:#6A737D;">└ regular file (-) or folder (d) etc.</span></span>
<span class="line"></span></code></pre></div><div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> [-R] [references][operator][modes] &lt;</span><span style="color:#032F62;">file</span><span style="color:#24292E;"> </span><span style="color:#032F62;">..</span><span style="color:#24292E;">.&gt;</span></span>
<span class="line"><span style="color:#6A737D;">##     │    │           │         └ r, w, x, etc.</span></span>
<span class="line"><span style="color:#6A737D;">##     │    │           └ +, -, =</span></span>
<span class="line"><span style="color:#6A737D;">##     │    └ u (user), g (group), o (other), a (all)</span></span>
<span class="line"><span style="color:#6A737D;">##     └ --recursive</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ug=rx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sample_file</span></span>
<span class="line"></span></code></pre></div><p>也可以使用数字直接设置 3 组权限，<code>r</code> 为 4，<code>w</code> 为 2，<code>x</code> 为 1</p> <div class="language-shellsession extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#005CC5;font-weight:bold;">$</span><span style="color:#24292E;"> chmod 664 sample_file</span></span>
<span class="line"><span style="color:#005CC5;font-weight:bold;">$</span><span style="color:#24292E;"> ls -l sample_file</span></span>
<span class="line"><span style="color:#6A737D;">-rw-rw-r--  1 jsmith programmers 57 Jul  3 10:13  sample_file</span></span>
<span class="line"></span></code></pre></div><h2 id="wget"><a href="#wget" class="header-anchor">#</a> <code>wget</code></h2> <h2 id="任务管理-nohup-ps-kill-jobs-fg-bg-disown"><a href="#任务管理-nohup-ps-kill-jobs-fg-bg-disown" class="header-anchor">#</a> 任务管理 <code>nohup</code>, <code>ps</code>, <code>kill</code>, <code>jobs</code>, <code>fg</code>, <code>bg</code>, <code>disown</code></h2> <h3 id="start-a-command-in-background"><a href="#start-a-command-in-background" class="header-anchor">#</a> Start a command in background</h3> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">nohup</span><span style="color:#24292E;"> </span><span style="color:#032F62;">your_command_here</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">output_file</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">2&gt;&amp;1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">/dev/null</span><span style="color:#24292E;"> &amp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;">jobs</span><span style="color:#24292E;">     </span><span style="color:#6A737D;">## doesn't work once logged out</span></span>
<span class="line"><span style="color:#6F42C1;">ps</span><span style="color:#24292E;"> </span><span style="color:#032F62;">x</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;">kill</span><span style="color:#24292E;"> %i  </span><span style="color:#6A737D;">## i is the job id, not pid</span></span>
<span class="line"><span style="color:#005CC5;">kill</span><span style="color:#24292E;"> &lt;</span><span style="color:#032F62;">pid</span><span style="color:#24292E;"> </span><span style="color:#032F62;">..</span><span style="color:#24292E;">.&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="move-a-foreground-job-to-background"><a href="#move-a-foreground-job-to-background" class="header-anchor">#</a> Move a foreground job to background</h3> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## press `ctrl-z` to suspend the current running command</span></span>
<span class="line"><span style="color:#005CC5;">jobs</span><span style="color:#24292E;">      </span><span style="color:#6A737D;">## check the job id</span></span>
<span class="line"><span style="color:#005CC5;">bg</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">## resume the current suspended job in the background</span></span>
<span class="line"><span style="color:#6A737D;"># disown  ## execute this if zsh refuzes to exit when there are running jobs</span></span>
<span class="line"></span></code></pre></div><p><a href="https://www.gnu.org/software/bash/manual/bash.html#Job-Control" target="_blank" rel="noopener noreferrer">Bash Reference Manual<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="check-task-status"><a href="#check-task-status" class="header-anchor">#</a> Check task status</h3> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">ps</span></span>
<span class="line"><span style="color:#6A737D;"># p &lt;pid ...&gt;  ## select by process id(s), identical to -p and --pid</span></span>
<span class="line"><span style="color:#6A737D;"># a            ## list all processes with a terminal</span></span>
<span class="line"><span style="color:#6A737D;"># x            ## list all processes owned by you</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">ps</span><span style="color:#24292E;"> </span><span style="color:#032F62;">aux</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">grep</span><span style="color:#24292E;"> &lt;</span><span style="color:#032F62;">search_st</span><span style="color:#24292E;">r&gt; </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">grep</span><span style="color:#24292E;"> &lt;</span><span style="color:#032F62;">another_st</span><span style="color:#24292E;">r&gt;</span></span>
<span class="line"><span style="color:#6A737D;">## pipe into grep or cat in case the output is truncated at the width of the terminal</span></span>
<span class="line"></span></code></pre></div><div class="language-text extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br></div><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#24292e;">PROCESS STATE CODES</span></span>
<span class="line"><span style="color:#24292e;">       Here are the different values that the s, stat and state output specifiers</span></span>
<span class="line"><span style="color:#24292e;">       (header &quot;STAT&quot; or &quot;S&quot;) will display to describe the state of a process:</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">               D    uninterruptible sleep (usually IO)</span></span>
<span class="line"><span style="color:#24292e;">               I    Idle kernel thread</span></span>
<span class="line"><span style="color:#24292e;">               R    running or runnable (on run queue)</span></span>
<span class="line"><span style="color:#24292e;">               S    interruptible sleep (waiting for an event to complete)</span></span>
<span class="line"><span style="color:#24292e;">               T    stopped by job control signal</span></span>
<span class="line"><span style="color:#24292e;">               t    stopped by debugger during the tracing</span></span>
<span class="line"><span style="color:#24292e;">               W    paging (not valid since the 2.6.xx kernel)</span></span>
<span class="line"><span style="color:#24292e;">               X    dead (should never be seen)</span></span>
<span class="line"><span style="color:#24292e;">               Z    defunct (&quot;zombie&quot;) process, terminated but not reaped by its</span></span>
<span class="line"><span style="color:#24292e;">                    parent</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">       For BSD formats and when the stat keyword is used, additional characters may</span></span>
<span class="line"><span style="color:#24292e;">       be displayed:</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">               &lt;    high-priority (not nice to other users)</span></span>
<span class="line"><span style="color:#24292e;">               N    low-priority (nice to other users)</span></span>
<span class="line"><span style="color:#24292e;">               L    has pages locked into memory (for real-time and custom IO)</span></span>
<span class="line"><span style="color:#24292e;">               s    is a session leader</span></span>
<span class="line"><span style="color:#24292e;">               l    is multi-threaded (using CLONE_THREAD, like NPTL pthreads do)</span></span>
<span class="line"><span style="color:#24292e;">               +    is in the foreground process group</span></span>
<span class="line"><span style="color:#24292e;"></span></span></code></pre></div><h2 id="别名-alias-type"><a href="#别名-alias-type" class="header-anchor">#</a> 别名 <code>alias</code>, <code>type</code></h2> <div class="language-shell extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## append the following line to `~/.bashrc` (or `~/.bash_aliases`)</span></span>
<span class="line"><span style="color:#D73A49;">alias</span><span style="color:#24292E;"> cmd</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">'your command'</span></span>
<span class="line"></span></code></pre></div><div class="language-shellsession extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#005CC5;font-weight:bold;">$</span><span style="color:#24292E;"> type cmd</span></span>
<span class="line"><span style="color:#6A737D;">cmd is aliased to `your command'</span></span>
<span class="line"><span style="color:#005CC5;font-weight:bold;">$</span><span style="color:#24292E;"> unalias cmd</span></span>
<span class="line"><span style="color:#005CC5;font-weight:bold;">$</span><span style="color:#24292E;"> type cmd</span></span>
<span class="line"><span style="color:#6A737D;">type: cmd: not found</span></span>
<span class="line"></span></code></pre></div><h2 id="tee"><a href="#tee" class="header-anchor">#</a> <code>tee</code></h2> <p>复制输出到指定文件（不影响终端的输出）</p> <div class="language-shell extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">python</span><span style="color:#24292E;"> </span><span style="color:#032F62;">train.py</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">2&gt;&amp;1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tee</span><span style="color:#24292E;"> </span><span style="color:#032F62;">out.txt</span></span>
<span class="line"></span></code></pre></div><p>实践经验：注意使用 <code>2&gt;&amp;1</code> 将 stderr 也保存下来</p> <h2 id="find"><a href="#find" class="header-anchor">#</a> <code>find</code></h2> <div class="language-shell extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">find</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'*.ipynb'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## case insensitive</span></span>
<span class="line"><span style="color:#6F42C1;">find</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-iname</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'foo*'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## max depth</span></span>
<span class="line"><span style="color:#6F42C1;">find</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-maxdepth</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'*bar'</span></span>
<span class="line"></span></code></pre></div><blockquote><p>GNU <strong>find</strong> searches the directory tree rooted at each given file name by <em>evaluating the given expression from left to right</em>, according to the rules of precedence (see section OPERATORS), until the outcome is known (the left hand side is false for and operations, true for or), at which point <strong>find</strong> moves on to the next file name.</p></blockquote> <h3 id="示例列出符合条件的文件名"><a href="#示例列出符合条件的文件名" class="header-anchor">#</a> 示例：列出符合条件的文件名</h3> <p>列出子目录下的文件，每行开头加上 <code>-i</code> 然后合并为一行，可以用作 <code>ffmpeg</code> 的输入</p> <div class="language-shell extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#24292E;">input_str</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">$(</span><span style="color:#6F42C1;">find</span><span style="color:#032F62;"> . </span><span style="color:#005CC5;">-path</span><span style="color:#032F62;"> './result*/out.mp4' </span><span style="color:#D73A49;">|</span><span style="color:#032F62;"> </span><span style="color:#6F42C1;">sort</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">-n</span><span style="color:#032F62;"> </span><span style="color:#D73A49;">|</span><span style="color:#032F62;"> </span><span style="color:#6F42C1;">sed</span><span style="color:#032F62;"> 's/^/-i /' </span><span style="color:#D73A49;">|</span><span style="color:#032F62;"> </span><span style="color:#6F42C1;">paste</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">-sd</span><span style="color:#032F62;"> ' ')</span></span>
<span class="line"></span></code></pre></div><h3 id="示例压缩特定文件"><a href="#示例压缩特定文件" class="header-anchor">#</a> 示例：压缩特定文件</h3> <p>排除多个目录，并使用多个筛选条件，最后压缩成 zip 文件</p> <div class="language-shell extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">find</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\(</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-path</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'./log'</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-or</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-path</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'./video*'</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\)</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-prune</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-or</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">-type</span><span style="color:#24292E;"> </span><span style="color:#032F62;">f</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\(</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'*.py'</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-or</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'*.yaml'</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\)</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-exec</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zip</span><span style="color:#24292E;"> </span><span style="color:#032F62;">out.zip</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{}</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+</span></span>
<span class="line"></span></code></pre></div><p><strong>注意</strong> 如果搜索的路径是 <code>.</code>，那么 <code>-path</code> 也需要使用 <code>.</code> 开头（如 <code>./log</code>），严格匹配</p> <h2 id="文件压缩解压-zip-tar"><a href="#文件压缩解压-zip-tar" class="header-anchor">#</a> 文件压缩、解压 <code>zip</code>, <code>tar</code></h2> <h3 id="zip"><a href="#zip" class="header-anchor">#</a> zip</h3> <p>压缩</p> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">zip</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-r</span><span style="color:#24292E;"> </span><span style="color:#032F62;">output.zip</span><span style="color:#24292E;"> &lt;</span><span style="color:#032F62;">file</span><span style="color:#24292E;"> </span><span style="color:#032F62;">..</span><span style="color:#24292E;">.&gt; [-x </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">file ...</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#6A737D;">## &lt;file&gt; can be file or dir</span></span>
<span class="line"><span style="color:#6A737D;"># -r &lt;zip_file&gt; &lt;file ...&gt;  ## --recurse-paths (-R --recurse-patterns)</span></span>
<span class="line"><span style="color:#6A737D;"># -u &lt;zip_file&gt; &lt;file ...&gt;  ## update the files in the zip archive</span></span>
<span class="line"><span style="color:#6A737D;"># -d &lt;zip_file&gt; &lt;file ...&gt;  ## delete the files from the zip archive</span></span>
<span class="line"><span style="color:#6A737D;"># -x &lt;file ...&gt;             ## exclude these files, e.g. -x '*.git*'</span></span>
<span class="line"></span></code></pre></div><p>更多压缩参数</p> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;"># -y  ## store symbolic links as is, instead of the referenced file</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># -0  ## store only (no compression)  ---  30s for 1.6G jpg files</span></span>
<span class="line"><span style="color:#6A737D;"># -1  ## compress faster              ---  70s for 1.6G jpg files</span></span>
<span class="line"><span style="color:#6A737D;"># -9  ## compress better</span></span>
<span class="line"></span></code></pre></div><p><code>-x</code> 默认相对于要压缩的根路径，如在下面的命令中 <code>-x 'tmp/*'</code> 和 <code>-x results/tmp/*</code> 是等价的</p> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">zip</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-r</span><span style="color:#24292E;"> </span><span style="color:#032F62;">data.zip</span><span style="color:#24292E;"> </span><span style="color:#032F62;">results</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'*.pt'</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'**/__pycache__/*'</span></span>
<span class="line"><span style="color:#6A737D;">## 压缩 results 目录，排除任意目录的 .pt 文件、任意 __pycache__ 子目录</span></span>
<span class="line"></span></code></pre></div><p><code>-r</code> 与 <code>-R</code></p> <ul><li><code>-r</code> 会递归压缩给定的目录，包括空文件夹</li> <li><code>-R</code> 是（递归地）匹配满足要求的文件再压缩</li></ul> <p>解压</p> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">unzip</span><span style="color:#24292E;"> &lt;</span><span style="color:#032F62;">zip_fil</span><span style="color:#24292E;">e&gt;</span></span>
<span class="line"><span style="color:#6A737D;"># -d &lt;dir&gt;  ## optional directory to which to extract files</span></span>
<span class="line"></span></code></pre></div><p>查看压缩包的内容</p> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">zip</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-sf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">file.zip</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">grep</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'/.'</span></span>
<span class="line"><span style="color:#6A737D;"># -sf &lt;zip_file&gt;            ## --show-files</span></span>
<span class="line"><span style="color:#6A737D;">## show the files that would be operated on, without actually processing them</span></span>
<span class="line"><span style="color:#6A737D;">## use `grep -v '/.'` to show only the first-level files</span></span>
<span class="line"><span style="color:#6A737D;">## use `/.*/.` to also include the second level</span></span>
<span class="line"></span></code></pre></div><p>示例：通配符以及文件筛选</p> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">zip</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-R</span><span style="color:#24292E;"> </span><span style="color:#032F62;">output.zip</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'*.py'</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'*.json'</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'results*/*'</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">'log/*'</span></span>
<span class="line"></span></code></pre></div><p>被 <code>-x</code> 排除的目录仍然会被扫描，可能非常耗时，想避免则可以使用 <a href="#find"><code>find</code></a> 命令配合 <code>-prune</code>，<code>-exec zip</code> 等参数来实现筛选压缩的功能</p> <h3 id="tar"><a href="#tar" class="header-anchor">#</a> tar</h3> <p>压缩</p> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-czvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">archive.tar.gz</span><span style="color:#24292E;"> &lt;</span><span style="color:#032F62;">file</span><span style="color:#24292E;"> </span><span style="color:#032F62;">..</span><span style="color:#24292E;">.&gt; [--exclude</span><span style="color:#D73A49;">=&lt;</span><span style="color:#24292E;">pattern ...</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#6A737D;"># -c  ## create an archive</span></span>
<span class="line"><span style="color:#6A737D;"># -z  ## compress the archive with gzip</span></span>
<span class="line"><span style="color:#6A737D;"># -v  ## verbose</span></span>
<span class="line"><span style="color:#6A737D;"># -f  ## allow to specifiy the filename of the archive</span></span>
<span class="line"><span style="color:#6A737D;"># --exclude        ## can be used multiple times</span></span>
<span class="line"></span></code></pre></div><p>解压</p> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-xzvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">archive.tar.gz</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--one-top-level[</span><span style="color:#D73A49;">=&lt;</span><span style="color:#005CC5;">dir</span><span style="color:#D73A49;">&gt;</span><span style="color:#005CC5;">]</span></span>
<span class="line"><span style="color:#6A737D;"># -x  ## extract an archive</span></span>
<span class="line"><span style="color:#6A737D;"># --one-top-level  ## extract all files into &lt;dir&gt;,</span></span>
<span class="line"><span style="color:#24292E;">                   </span><span style="color:#6A737D;">## or by default a new folder with the name of the archive</span></span>
<span class="line"></span></code></pre></div><p>查看压缩包内容</p> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-tvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">file.tar</span></span>
<span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ztvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">file.tar.gz</span></span>
<span class="line"><span style="color:#6A737D;"># -t  ## list the contents of an archive</span></span>
<span class="line"><span style="color:#6A737D;">## use above `--exclude` option to show only first level (`*/*`) or second level (`*/*/*`)</span></span>
<span class="line"></span></code></pre></div><h2 id="文件大小与硬盘占用-du-df"><a href="#文件大小与硬盘占用-du-df" class="header-anchor">#</a> 文件大小与硬盘占用 <code>du</code>, <code>df</code></h2> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">du</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ah</span><span style="color:#24292E;"> [-d </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">max_depth</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">] [--exclude </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">relative_path</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">] [path]</span></span>
<span class="line"><span style="color:#6A737D;"># -a, --all</span></span>
<span class="line"><span style="color:#6A737D;"># -h, --human-readable</span></span>
<span class="line"><span style="color:#6A737D;"># -d, --max-depth</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">du</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ah</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">sort</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-rh</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">head</span></span>
<span class="line"><span style="color:#6A737D;">## pipe the result of `du` to `sort` and take the top-10 results</span></span>
<span class="line"><span style="color:#6A737D;"># -r, reverse order</span></span>
<span class="line"><span style="color:#6A737D;"># -h, --human-numeric-sort</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">df</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-lh</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">squashfs</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tmpfs</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtmpfs</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">## 忽略不关心的文件系统</span></span>
<span class="line"></span></code></pre></div><p>或者使用交互式的查看工具 <code>ncdu</code>（用 <code>apt</code> 安装）</p> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">ncdu</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--exclude</span><span style="color:#24292E;"> </span><span style="color:#032F62;">home</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--exclude</span><span style="color:#24292E;"> </span><span style="color:#032F62;">media</span></span>
<span class="line"><span style="color:#6A737D;">## 查看根目录硬盘空间占用，home 和 media 除外</span></span>
<span class="line"></span></code></pre></div><h2 id="command-history"><a href="#command-history" class="header-anchor">#</a> Command history</h2> <ul><li>press <kbd>Ctrl</kbd> + <kbd>R</kbd> to start search</li> <li>press <kbd>Ctrl</kbd> + <kbd>R</kbd> again to see the next result</li> <li>press <kbd>Tab</kbd> to accept a result</li></ul> <p><a href="https://www.digitalocean.com/community/tutorials/how-to-use-bash-history-commands-and-expansions-on-a-linux-vps#searching-through-bash-history" target="_blank" rel="noopener noreferrer">How to use bash history commands<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="使用变量"><a href="#使用变量" class="header-anchor">#</a> 使用变量</h2> <div class="language-shellsession extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## define a variable</span></span>
<span class="line"><span style="color:#005CC5;font-weight:bold;">$</span><span style="color:#24292E;"> a=</span><span style="color:#032F62;">&quot;world&quot;</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">## </span><span style="color:#D73A49;">NOTE</span><span style="color:#6A737D;"> whitespace is not allowed before/after `=`</span></span>
<span class="line"><span style="color:#005CC5;font-weight:bold;">$</span><span style="color:#24292E;"> echo hello $a    </span><span style="color:#6A737D;">## use directly</span></span>
<span class="line"><span style="color:#6A737D;">hello world</span></span>
<span class="line"><span style="color:#005CC5;font-weight:bold;">$</span><span style="color:#24292E;"> echo </span><span style="color:#032F62;">&quot;hello </span><span style="color:#24292E;">$a</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">## inside a double-quoted string</span></span>
<span class="line"><span style="color:#6A737D;">hello world</span></span>
<span class="line"><span style="color:#005CC5;font-weight:bold;">$</span><span style="color:#24292E;"> echo </span><span style="color:#032F62;">'hello $a'</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">## single-quoted strings are interpreted literally</span></span>
<span class="line"><span style="color:#6A737D;">hello $a</span></span>
<span class="line"></span></code></pre></div><div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## 使用 for 循环</span></span>
<span class="line"><span style="color:#D73A49;">for</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> {</span><span style="color:#6F42C1;">1..10</span><span style="color:#24292E;">}  </span><span style="color:#6A737D;">## press `Enter` here and continue typing</span></span>
<span class="line"><span style="color:#005CC5;">echo</span><span style="color:#24292E;"> $i</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## 更多处理</span></span>
<span class="line"><span style="color:#005CC5;">echo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">$(</span><span style="color:#6F42C1;">printf</span><span style="color:#032F62;"> %</span><span style="color:#005CC5;">02d</span><span style="color:#032F62;"> </span><span style="color:#24292E;">$i</span><span style="color:#032F62;">)</span><span style="color:#24292E;">           </span><span style="color:#6A737D;">## 01 02 03 ...</span></span>
<span class="line"><span style="color:#005CC5;">echo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">$(</span><span style="color:#6F42C1;">printf</span><span style="color:#032F62;"> %</span><span style="color:#005CC5;">02d</span><span style="color:#032F62;"> $((</span><span style="color:#24292E;">$i</span><span style="color:#032F62;"> </span><span style="color:#D73A49;">*</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">)))</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">## 02 04 06 ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## 遍历文件</span></span>
<span class="line"><span style="color:#D73A49;">for</span><span style="color:#24292E;"> f </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span></span>
<span class="line"><span style="color:#D73A49;">for</span><span style="color:#24292E;"> f </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">.txt</span></span>
<span class="line"></span></code></pre></div><div class="language-shellsession extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## 截取字符串</span></span>
<span class="line"><span style="color:#005CC5;font-weight:bold;">$</span><span style="color:#24292E;"> echo </span><span style="color:#032F62;">'0123456789'</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">cut</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c1-4</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">## 1-based index, both inclusive</span></span>
<span class="line"><span style="color:#6A737D;">0123</span></span>
<span class="line"></span></code></pre></div><div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6A737D;">## in the `.bashrc` file</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> rds</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">'username@bluebear.bham.ac.uk:/rds'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## use in a command</span></span>
<span class="line"><span style="color:#6F42C1;">scp</span><span style="color:#24292E;"> $rds</span><span style="color:#032F62;">/path/to/foo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.</span></span>
<span class="line"><span style="color:#6A737D;">## `scp username@bluebear.bham.ac.uk:/rds/path/to/foo .`</span></span>
<span class="line"></span></code></pre></div><p><a href="http://www.compciv.org/topics/bash/variables-and-substitution/" target="_blank" rel="noopener noreferrer">http://www.compciv.org/topics/bash/variables-and-substitution/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>定义变量前加上 export 则会定义为环境变量</p> <p>更多操作见 <a href="https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html" target="_blank" rel="noopener noreferrer">https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="split"><a href="#split" class="header-anchor">#</a> <code>split</code></h2> <div class="language-shell extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">split</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-b</span><span style="color:#24292E;"> </span><span style="color:#032F62;">1024m</span><span style="color:#24292E;"> </span><span style="color:#032F62;">file</span><span style="color:#24292E;"> </span><span style="color:#032F62;">prefix</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#032F62;">filea</span><span style="color:#24292E;"> </span><span style="color:#032F62;">fileb</span><span style="color:#24292E;"> </span><span style="color:#032F62;">filec</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">file</span></span>
<span class="line"></span></code></pre></div><h2 id="服务器管理常用命令"><a href="#服务器管理常用命令" class="header-anchor">#</a> 服务器管理常用命令</h2> <div class="language-shelldoc extra-class"><pre tabindex="0" class="shiki github-light" style="background-color:#fff;"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">adduser</span><span style="color:#24292E;"> &lt;</span><span style="color:#032F62;">usernam</span><span style="color:#24292E;">e&gt;                  </span><span style="color:#6A737D;"># adduser 比 useradd 方便一点</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">usermod</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-aG</span><span style="color:#24292E;"> &lt;</span><span style="color:#032F62;">groupnam</span><span style="color:#24292E;">e&gt; &lt;</span><span style="color:#032F62;">usernam</span><span style="color:#24292E;">e&gt;  </span><span style="color:#6A737D;"># 把用户添加进 group</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">passwd</span><span style="color:#24292E;"> &lt;</span><span style="color:#032F62;">usernam</span><span style="color:#24292E;">e&gt; [--expire]        </span><span style="color:#6A737D;"># 改密码以及让用户重设密码</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">chmod</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-R</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2775</span><span style="color:#24292E;"> &lt;</span><span style="color:#032F62;">di</span><span style="color:#24292E;">r&gt;                 </span><span style="color:#6A737D;"># 设置目录继承 group owner，权限显示为 rws</span></span>
<span class="line"></span></code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last updated:</span> <span class="time">8/4/2025, 7:21:44 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/software/vim.html" class="prev">
        Vim
      </a></span> <span class="next"><a href="/notes/software/powershell.html">
        PowerShell
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/notes/assets/js/app.943eb73b.js" defer></script><script src="/notes/assets/js/3.8465ba19.js" defer></script><script src="/notes/assets/js/103.11ba2dc4.js" defer></script>
  </body>
</html>
